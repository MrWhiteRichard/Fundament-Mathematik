\documentclass[aspectratio=169]{beamer}



\mode<presentation>
{
 \usetheme[reversetitle,notitle,noauthor]{Wien}
%    \usetheme[noauthor]{Wien}
}

\usepackage{url}
\usepackage{graphicx}
\graphicspath{{./}{./Figures/}}

\usepackage{appendixnumberbeamer}
\usepackage{algorithm2e}
\usepackage{float}
\usepackage{tikz}
\usetikzlibrary{arrows.meta,positioning}
\usetikzlibrary{positioning}
\usetikzlibrary{overlay-beamer-styles}

\tikzset{onslide/.code args={<#1>#2}{%
  \only<#1>{\pgfkeysalso{#2}} % \pgfkeysalso doesn't change the path
}}
\tikzset{temporal/.code args={<#1>#2#3#4}{%
  \temporal<#1>{\pgfkeysalso{#2}}{\pgfkeysalso{#3}}{\pgfkeysalso{#4}} % \pgfkeysalso doesn't change the path
}}

\tikzstyle{highlight}=[red,ultra thick]

% To avoid a warning from the hyperref package:
\pdfstringdefDisableCommands{%
    \def\translate{}%
}

% To make sure, that the footnote is placed above and outside the
% footline (but it only works for one footnote per frame):
%
% \addtobeamertemplate{footnote}{}{\vspace{4ex}}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
\title[Maximum Flow Problem]{Maximal flows in networks}


\subtitle{Bachelorarbeit aus Diskreter Mathematik}

\author[F. Schager]{Florian Schager}

\institute[TU Wien]{TU Wien, Vienna, Austria}

\date{19. April 2021}

\input{packages.tex}
\input{macros.tex}
\input{environments.tex}

\begin{document}

\begin{frame}
    \titlepage
\end{frame}

%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%
%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%%

\begin{frame}{Problemstellung}
  \begin{problem*}
    Wir wollen in einem Flussnetzwerk die maximale Transportkapazität
    von einem ausgezeichnetem Knoten, der Quelle $s$, zum Abflussknoten $t$ bestimmen.

    Ursprünglich wurde das Problem in den 50ern zur Modellierung des sowjetischen Schienenverkehrs gestellt.

    Anwendungen reichen von der Fluglinienplanung bis hin zur Segmentierung in der
    Bildverarbeitung.
  \end{problem*}
\end{frame}


\begin{frame}{Definitionen (1/2)}
  \begin{definition*}[Flussnetzwerk]
    Ein Flussnetzwerk $N = (G,c,s,t)$ besteht aus einem gerichteter Graph $G = (V,E)$ mit einer
    Kapazitätsfunktion $c: E \to \R^+$ mit zwei ausgezeichneten Knoten $s$ und $t$,
    wobei $t$ von $s$ aus erreichbar sein soll.
  \end{definition*}

  \pause

  \begin{definition*}[Fluss]
    Ein zulässiger Fluss durch $N$ ist eine Funktion $f: E \to \R_0^+$, welche
    den folgenden Bedingungen genügt:
    \begin{enumerate}
      \item<3-> $0 \leq f(e) \leq c(e)$ für jede Kante $e$; \quad (Kapazitätsbeschränkung)
      \item<4> $\sum_{e^+ = v} f(e) = \sum_{e^- = v} f(e)$ für jeden Knoten $v \neq s,t$. \\
      Dabei bezeichnen $e^-$ und $e^+$ jeweils den Start- und Endpunkt der Kante $e$.
      \quad (Flusserhaltung)
    \end{enumerate}
  \end{definition*}
\end{frame}

\begin{frame}{Definitionen (2/2)}
  \begin{definition*}[Wert eines Flusses]
    Die Größe
    \begin{align*}
      w(f) := \sum_{e^- = s}f(e) - \sum_{e^+ = s} f(e) = \sum_{e^+ = t}f(e) - \sum_{e^- = t} f(e)
    \end{align*}
    nennen wir den Wert eines Flusses.
  \end{definition*}

  \pause

  \begin{definition*}[Cut]
    Ein Cut ist eine Partition $V = S \dot \cup T$ eines Flussnetzwerks $N = (G,c,s,t)$
    mit $s \in S$ und $t \in T$. Die Kapazität eines Cuts ist gegeben durch
    \begin{align*}
      c(S,T) = \sum_{e^- \in S, s^+ \in T} c(e).
    \end{align*}
    Ein Cut heißt minimal, wenn $c(S,T) \leq c(S',T')$ für alle Cuts $(S',T')$.
  \end{definition*}

  \end{frame}

  \begin{frame}{Beispiel - Flüsse und Cuts}

  \begin{figure}
  \centering

    \subfloat[$w(f) = 3$]{

    \begin{tikzpicture}[
        mycircle/.style={
           circle,
           draw=black,
           fill=gray,
           fill opacity = 0.3,
           text opacity=1,
           inner sep=0pt,
           minimum size=25pt},
        myarrow/.style={-Stealth},
        node distance=0.8cm and 1.6cm
        ]
        \node[mycircle] (s) {$s$};
        \node[mycircle,above right=of s] (v1) {$v_1$};
        \node[mycircle,below right=of s] (v2) {$v_2$};
        \node[mycircle,above right=of v2] (t) {$t$};

        \node[above=of v1]{\textbf{Maximaler Fluss $f$}};


      \draw [myarrow] (s) -- node[sloped,font=\small,above] {(2/2)} (v1);
      \draw [myarrow] (s) -- node[sloped,font=\small,below] {(1/1)} (v2);
      \draw [myarrow] (v1) -- node[sloped,font=\small,above] {(1/1)} (t);
      \draw [myarrow] (v2) -- node[sloped,font=\small,below] {(2/2)} (t);
      \draw [myarrow] (v2.70) -- node[sloped,font=\small,below] {(0/1)} (v1.290);
      \draw [myarrow] (v1.250) -- node[sloped,font=\small,above,rotate=180] {(1/1)} (v2.110);

    \end{tikzpicture}
  }
  \hspace{1cm}
  \pause
  \subfloat[$c(S,T) = 3$]{

  \begin{tikzpicture}[
      mycircle/.style={
         circle,
         draw=black,
         fill=gray,
         fill opacity = 0.3,
         text opacity=1,
         inner sep=0pt,
         minimum size=25pt},
      myarrow/.style={-Stealth},
      node distance=0.8cm and 1.6cm
      ]
      \node[mycircle, onslide=<2>{violet}] (s) {$s$};
      \node[mycircle,above right=of s, onslide=<2>{violet}] (v1) {$v_1$};
      \node[mycircle,below right=of s, onslide=<2>{violet}] (v2) {$v_2$};
      \node[mycircle,above right=of v2, onslide=<2>{olive}] (t) {$t$};


      \node[above=of v1]{\textbf{Minimaler Cut $({\color{violet}S},{\color{olive}T})$}};



    \draw [myarrow] (s) -- node[sloped,font=\small,above] {2} (v1);
    \draw [myarrow] (s) -- node[sloped,font=\small,below] {1} (v2);
    \draw [myarrow, onslide=<2>{highlight}] (v1) -- node[sloped,font=\small,above] {1} (t);
    \draw [myarrow, onslide=<2>{highlight}] (v2) -- node[sloped,font=\small,below] {2} (t);
    \draw [myarrow] (v2.70) -- node[sloped,font=\small,below] {1} (v1.290);
    \draw [myarrow] (v1.250) -- node[sloped,font=\small,above,rotate=180] {1} (v2.110);

  \end{tikzpicture}
  }


  \end{figure}

  \end{frame}

  \begin{frame}{Erweiternde Pfade}

  \begin{definition*}[Pfad]
    Wir definieren einen Pfad in einem gerichteten Graphen als eine Folge
    $(e_1,\dots,e_n)$ von Kanten, sodass die zugehörige Folge an ungerichteten
    Kanten ein Pfad in dem zugehörigen ungerichteten Graph ist.
    \pause


    Sei $(v_0,\dots,v_n)$ die zum Pfad zugehörige Knotenfolge.
    Dann heißt jede Kante der Form $v_{i-1}v_{i}$ eine Vorwärts-Kante
    und jede Kante der Form $v_{i}v_{i-1}$ eine Rückwärts-Kante.

  \end{definition*}

  \pause

  \begin{definition*}[Erweiternder Pfad]
    Ein erweiternder Pfad bezüglich einem Fluss $f$ in einem Flussnetzwerk
    $N = (G,c,s,t)$ ist ein Pfad $P$ von $s$ nach $t$,
    sodass $f(e) < c(e)$ für alle Vorwärts-Kanten $e \in P$ und $f(e) > 0$
    für alle Rückwärts-Kanten $e \in P$ gilt.
  \end{definition*}

  \end{frame}

  \begin{frame}{Beispiel - Erweiternde Pfade}

  \begin{figure}
  \centering

  \subfloat[$w(f_0) = 2$]{
    \begin{tikzpicture}[
        mycircle/.style={
           circle,
           draw=black,
           fill=gray,
           fill opacity = 0.3,
           text opacity=1,
           inner sep=0pt,
           minimum size=25pt},
        myarrow/.style={-Stealth},
        node distance=0.8cm and 1.6cm
        ]
        \node[mycircle] (s) {$s$};
        \node[mycircle,above right=of s] (v1) {$v_1$};
        \node[mycircle,below right=of s] (v2) {$v_2$};
        \node[mycircle,above right=of v2] (t) {$t$};

        \node[above=of v1]{\textbf{Erweiternder Pfad $(s,v_1,v_2,t)$}};


      \draw [myarrow, onslide=<1>{highlight}] (s) -- node[sloped,font=\small,above] {(1/2)} (v1);
      \draw [myarrow] (s) -- node[sloped,font=\small,below] {(1/1)} (v2);
      \draw [myarrow] (v1) -- node[sloped,font=\small,above] {(1/1)} (t);
      \draw [myarrow, onslide=<1>{highlight}] (v2) -- node[sloped,font=\small,below] {(1/2)} (t);
      \draw [myarrow, onslide=<1>{highlight}] (v2.70) -- node[sloped,font=\small,below] {(1/1)} (v1.290);
      \draw [myarrow] (v1.250) -- node[sloped,font=\small,above,rotate=180] {(1/1)} (v2.110);

    \end{tikzpicture}
  }
  \pause
  \hspace{1cm}
  \subfloat[$w(f_1) = 3$]{
    \begin{tikzpicture}[
        mycircle/.style={
           circle,
           draw=black,
           fill=gray,
           fill opacity = 0.3,
           text opacity=1,
           inner sep=0pt,
           minimum size=25pt},
        myarrow/.style={-Stealth},
        node distance=0.8cm and 1.6cm
        ]
        \node[mycircle] (s) {$s$};
        \node[mycircle,above right=of s] (v1) {$v_1$};
        \node[mycircle,below right=of s] (v2) {$v_2$};
        \node[mycircle,above right=of v2] (t) {$t$};

        \node[above=of v1]{\textbf{Erweiterter Fluss $f_1$}};


      \draw [myarrow] (s) -- node[sloped,font=\small,above, onslide=<2>{green}] {(2/2)} (v1);
      \draw [myarrow] (s) -- node[sloped,font=\small,below] {(1/1)} (v2);
      \draw [myarrow] (v1) -- node[sloped,font=\small,above] {(1/1)} (t);
      \draw [myarrow] (v2) -- node[sloped,font=\small,below, onslide=<2>{green}] {(2/2)} (t);
      \draw [myarrow] (v2.70) -- node[sloped,font=\small,below, onslide=<2>{red}] {(0/1)} (v1.290);
      \draw [myarrow] (v1.250) -- node[sloped,font=\small,above,rotate=180] {(1/1)} (v2.110);

    \end{tikzpicture}
  }

  \end{figure}

  \end{frame}

  \begin{frame}{Wichtige Resultate}

  \begin{theorem*}[Augmenting Path Theorem]
    Ein Fluss $f$ in einem Flussnetzwerk $N = (G,c,s,t)$ ist genau dann maximal,
    wenn es keine erweiternden Pfade bezüglich $f$ gibt.
  \end{theorem*}

  \pause

  \begin{theorem*}[Integral Flow Theorem]
    Sei $N = (G,c,s,t)$ ein Flussnetzwerk mit ausschließlich ganzzahligen Kapazitäten.
    Dann existiert ein maximaler Fluss, der ebenso nur aus ganzzahligen Werten $f(e)$
    besteht.
  \end{theorem*}

  \pause

  \begin{theorem*}[Max-Flow Min-Cut Theorem]
    Der maximale Wert eines Flusses in einem Flussnetzwerk $N$ entspricht
    der minimalen Kapazität eines Cuts in $N$.
  \end{theorem*}

  \end{frame}

  \begin{frame}{Algorithmus: Grundidee}

  \begin{algorithmus*}
    \begin{itemize}
      \item<1-> Starte mit dem trivialen Fluss: $f(e) = 0 , e \in E$.
      \item<2-> Finde einen erweiternden Pfad $P$.
      \item<3-> Berechne
      \begin{align*}
        d := \min[&\{c(e) - f(e): e \text{ Vorwärts-Kante } \in P\} \ \cup \\
        &\{f(e): e \text{ Rückwärts-Kante } \in P\} ].
      \end{align*}
      \item<4-> Konstruiere erweiterten Fluss $f'$ mit $w(f') = w(f) + d$:
      \begin{align*}
        f'(e) = \begin{cases}
          f(e) + d, & e \text{ ist Vorwärts-Kante } \in P \\
          f(e) - d, & e \text{ ist Rückwärts-Kante } \in P\\
          f(e), & \text{ sonst}
        \end{cases}
      \end{align*}
      \item<5-> Wiederhole solange, bis kein erweiternder Pfad mehr gefunden werden kann.
    \end{itemize}
  \end{algorithmus*}

  \end{frame}


  \begin{frame}{Algorithmus: Ford-Fulkerson - Beispiel}

  \begin{center}

  \begin{figure}
  \begin{tikzpicture}[
      mycircle/.style={
         circle,
         draw=black,
         fill=gray,
         fill opacity = 0.3,
         text opacity=1,
         inner sep=0pt,
         minimum size=25pt},
      myarrow/.style={-Stealth},
      node distance=0.8cm and 1.6cm
      ]
      \node[mycircle, onslide=<2-6>{blue}, onslide=<8-12>{blue}](s) {$s$};
      \node[left=0cm of s, visible on=<{2-6,8-12}>, font=\small] {$(-, \infty)$};

      \node[mycircle,above right=of s, onslide=<3-6>{blue}] (v1) {$v_1$};
      \node[above=0cm of v1, visible on=<2-6>, font=\small] {$(s, +, 10)$};
      \node[above=0cm of v1, visible on=<8-12>, font=\small] {$(s, +, 9)$};

      \node[mycircle,below right=of s, onslide=<9-12>{blue}] (v2) {$v_2$};
      \node[below=0cm of v2, visible on=<{2-6,8-12}>, font=\small] {$(s, +, 10)$};

      \node[mycircle,right=of v1, onslide=<{4-6,11-12}>{blue}] (v3) {$v_3$};
      \node[above=0cm of v3, visible on=<3-6>, font=\small] {$(v_1, +, 10)$};
      \node[above=0cm of v3, visible on=<10-12>, font=\small] {$(v_4, -, 1)$};

      \node[mycircle,right=of v2, onslide=<{5-6,10-12}>{blue}] (v4) {$v_4$};
      \node[below=0cm of v4, visible on=<4-6>, font=\small] {$(v_3, +, 1)$};
      \node[below=0cm of v4, visible on=<9-12>, font=\small] {$(v_2, +, 10)$};

      \node[mycircle,right=of v4, onslide=<6>{blue}] (v5) {$v_5$};
      \node[below=0cm of v5, visible on=<5-6>, font=\small] {$(v_4, +, 10)$};
      \node[below=0cm of v5, visible on=<10-12>, font=\small] {$(v_4, +, 9)$};

      \node[mycircle,right=of v3, onslide=<12>{blue}] (v6) {$v_6$};
      \node[above=0cm of v6, visible on=<4-6>, font=\small] {$(v_3, +, 10)$};
      \node[above=0cm of v6, visible on=<11-12>, font=\small] {$(v_3, +, 10)$};

      \node[mycircle,below right=of v6] (t) {$t$};
      \node[right=0cm of t, visible on=<6>, font=\small] {$(v_5, +, 10)$};
      \node[right=0cm of t, visible on=<12>, font=\small] {$(v_6, +, 10)$};

      \node[below=of v4, visible on=<1>]
      {\small {\color{blue} Abbildung:} Flussnetzwerk, Kanten mit $(f(e)/c(e))$ markiert};
      \node[below=of v4, visible on=<2-6>] {\small {\color{blue} Abbildung:} $w(f_0) = 0$};
      \node[below=of v4, visible on=<7-12>] {\small {\color{blue} Abbildung:} $w(f_1) = 1$};
      \node[below=of v4, visible on=<13>] {\small {\color{blue} Abbildung:} $w(f_2) = 2$};

    \draw [myarrow, visible on=<1-6>] (s) -- node[sloped,font=\small, above] {(0/10)} (v1);
    \draw [myarrow, visible on=<7-13>, onslide=<7>{highlight}] (s) -- node[sloped,font=\small, above]
    {(1/10)} (v1);

    \draw [myarrow, visible on=<1-12>] (s) -- node[sloped,font=\small, below] {(0/10)} (v2);
    \draw [myarrow, visible on=<13>, onslide=<13>{highlight}] (s) -- node[sloped,font=\small, below]
    {(1/10)} (v2);

    \draw [myarrow, visible on=<1-6>] (v1) -- node[sloped,font=\small, above] {(0/10)} (v3);
    \draw [myarrow, visible on=<7-13>, onslide=<7>{highlight}] (v1) -- node[sloped,font=\small, above]
    {(1/10)} (v3);

    \draw [myarrow, visible on=<1-12>] (v2) -- node[sloped,font=\small, below] {(0/10)} (v4);
    \draw [myarrow, visible on=<13>, onslide=<13>{highlight}] (v2) -- node[sloped,font=\small, below]
    {(1/10)} (v4);

    \draw [myarrow, visible on=<1-6>] (v3) -- node[sloped,font=\small, above] {(0/1)} (v4);
    \draw [myarrow, visible on=<7-12>, onslide=<7>{highlight}] (v3) -- node[sloped,font=\small, above]
    {(1/1)} (v4);
    \draw [myarrow, onslide=<13>{highlight}, visible on=<13>] (v3) -- node[sloped,font=\small, above]
    {(0/1)} (v4);

    \draw [myarrow] (v4) -- node[sloped,font=\small, below, visible on=<1-6>] {(0/10)} (v5);
    \draw [myarrow, visible on=<7-13>, onslide=<7>{highlight}] (v4) -- node[sloped,font=\small, below]
    {(1/10)} (v5);

    \draw [myarrow] (v3) -- node[sloped,font=\small, above, visible on=<1-12>] {(0/10)} (v6);
    \draw [myarrow, visible on=<13>, onslide=<13>{highlight}] (v3) -- node[sloped,font=\small, above]
    {(1/10)} (v6);

    \draw [myarrow] (v5) -- node[sloped,font=\small, below, visible on=<1-6>] {(0/10)} (t);
    \draw [myarrow, visible on=<7-13>, onslide=<7>{highlight}] (v5) -- node[sloped,font=\small, below]
    {(1/10)} (t);

    \draw [myarrow] (v6) -- node[sloped,font=\small, above, visible on=<1-12>] {(0/10)} (t);
    \draw [myarrow, visible on=<13>, onslide=<13>{highlight}] (v6) -- node[sloped,font=\small, above]
    {(1/10)} (t);

    \end{tikzpicture}

  \end{figure}

  \end{center}

  \end{frame}

  \begin{frame}{Algorithmus: Ford-Fulkerson - Analyse}

  \begin{itemize}
    \item Der Algorithmus garantiert noch nicht effiziente Wahl der
    erweiternden Pfade und hat nicht polynomielle Laufzeit in Abhängigkeit von $|V|$ und $|E|$,
    da die Laufzeit auch noch von der Kapazitätsfunktion $c$ abhängt.
    \pause
    \item Kann für irrationale Kapazitäten scheitern, ist aber in der Praxis irrelevant.
  \end{itemize}

  \pause

  \begin{modifikation*}[Edmonds und Karp]
    Wird die Reihenfolge, in der die Knoten mit Labeln versehen werden, gemäß
    einer Breitensuche gewählt, so lässt sich der Aufwand auf $O(|V||E|^2)$ reduzieren.
  \end{modifikation*}

  \end{frame}

  \begin{frame}{Vertiefung}

  \begin{anwendungen*}
    Welche Probleme können auf ein Maximum Flow Problem reduziert werden?
    \begin{itemize}
      \item Maximale Anzahl disjunkter Pfade von der Quelle zum Abfluss.
      \item Maximale Kardinalität eines Matching in einem bipartitem Graph und perfekte Matchings.
      \item Knotenüberdeckungsproblem.
      \item Circulation Problem.
      \item Matrix-Rundungsproblem.
    \end{itemize}

  \end{anwendungen*}

  \pause

  \begin{algorithmen*}
  \begin{itemize}
    \item Blocking Flows
    \item Push-Relabel-Algorithmus von Goldberg and Tarjan
  \end{itemize}

  \end{algorithmen*}



  \end{frame}

\end{document}


%%% Local Variables:
%%% mode: latex
%%% TeX-master: t
%%% End:
