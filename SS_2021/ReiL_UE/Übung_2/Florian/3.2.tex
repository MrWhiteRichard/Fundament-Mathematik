% --------------------------------------------------------------------------------

\begin{exercise}[Exercise 4.2]

In Example 4.1, suppose a new state 15 is added to the gridworld just below state 13,
and its actions, \textsc{left}, \textsc{up}, \textsc{right}, and \textsc{down},
take the agent to states 12, 13, 14, and 15, respectively. Assume that the transitions
from the original states are unchanged. What, then, is $v_\pi(15)$ for the equiprobable
random policy? Now suppose the dynamics of state 13 are also changed, such that
action \textsc{down} from state 13 takes the agent to the new state 15.
What is $v_\pi(15)$ for the equiprobable random policy in this case?

\end{exercise}

% --------------------------------------------------------------------------------

\begin{solution}

In the first scenario, where only the new state 15 is added, the state value
functions of all other states remain the same, since their transition probabilities
don't change. For state 15 we have therefore

\begin{align*}
  v_\pi(15) &= \sum_{a} \pi(a|s) \sum_{s',r}p(s',r|s,a)[r + \gamma v_\pi(s')]
  = \frac{1}{4}[-1 - 22 - 1 -20 - 1 - 14 - 1 +v_\pi(15)]
  = \frac{1}{4}[-60 + v_\pi(15)] \\
  &\iff \frac{3}{4}v_\pi(15) = -15 \iff v_\pi(15) = -20.
\end{align*}

The second scenario doesn't change the state value of 13, since the action \textsc{down},
which previously kept the agent on state 13 (with value -20) now moves the agent
to state 15 with the same state value as state 13.
Therefore, the calculations for the state values remain unchanged.

\end{solution}

% --------------------------------------------------------------------------------
