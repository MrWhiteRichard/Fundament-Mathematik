% --------------------------------------------------------------------------------

\begin{exercise}[Exercise 6.8]

Show that an action-value version of (6.6) holds for the action-value form
of the TD error $\delta_t = R_{t+1} + \gamma Q(S_{t+1}, A_{t+1}) - Q(S_t,A_t)$,
again assuming that the values don't change from step to step.

\end{exercise}

% --------------------------------------------------------------------------------

\begin{solution}

\begin{align*}
    G_t - Q(S_t, A_t) 
    &= R_{t+1} + \gamma G_{t+1} - Q(S_t,A_t) + \gamma Q(S_{t+1}, A_{t+1}) - \gamma Q(S_{t+1}, A_{t+1}) \\
    &= \delta_t + \gamma (G_{t+1} - Q(S_{t+1}, A_{t+1})) \\
    &= \delta_t + \gamma \delta_{t+1} + \dots + 
    \underbrace{\gamma^{T-t}(G_T - Q(S_T,A_T))}_{=0} \\
    &= \sum_{k=t}^{T-1} \gamma^{k-t} \delta_k.
\end{align*}

\end{solution}

% --------------------------------------------------------------------------------
    