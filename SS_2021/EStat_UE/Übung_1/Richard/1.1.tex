% --------------------------------------------------------------------------------

\begin{exercise}[Card game]

A deck of $52$ cards has $13$ ranks ($2$, $3$, $4$, $5$, $6$, $7$, $8$, $9$, $10$, $J$, $Q$, $K$, $A$) an $4$ suits ($\textcolor{red}{\heartsuit}$, $\spadesuit$, $\textcolor{red}{\diamondsuit}$, $\clubsuit$).
Three cards are drawn randomly without replacement from a deck of $52$ cards.

\begin{enumerate}[label = (\alph*)]
    \item What ist the probability that all cards are in the same suit?
    \item What ist the probability that all cards have the same rank?
    \item What ist the probability that the three cards contain exactly one pair (a pair means two cards with the same rank from two different suits)?
\end{enumerate}

\end{exercise}

% --------------------------------------------------------------------------------

\begin{solution}

Let $X_i$ denote the card that gets chosen in the $i$-th step and

\begin{gather*}
    S := \Bbraces{\textcolor{red}{\heartsuit}, \spadesuit, \textcolor{red}{\diamondsuit}, \clubsuit},
    \quad
    R := \Bbraces{2, 3, 4, 5, 6, 7, 8, 9, 10, J, Q, K, A}, \\
    s_i := \operatorname{suit},
    \quad
    r_i := \operatorname{rank},
    \quad
    i = 1, 2, 3.
\end{gather*}

\begin{enumerate}[label = (\alph*)]

    \item

    \begin{align*}
        P(s_1 = \cdots = s_3)
        & =
        \sum_{s \in S} P(s_1 = \cdots = s_3 = s) \\
        & =
        \sum_{s \in S} P(s_1 = s) P(s_2 = s \mid s_1 = s) P(s_3 = s \mid s_1 = s_2 = s) \\
        & =
        |S| \frac{13}{52} \frac{12}{51} \frac{11}{50} \\
        & =
        \frac{22}{425}
    \end{align*}

    \item

    \begin{align*}
        P(r_1 = \dots = r_3)
        & =
        \sum_{r \in R} P(r_1 = \cdots = r_3 = r) \\
        & =
        \sum_{r \in R} P(r_1 = r) P(r_2 = r \mid r_1 = r) P(r_3 = r \mid r_1 = r_2 = r) \\
        & =
        |R| \frac{4}{52} \frac{3}{51} \frac{2}{50} \\
        & =
        \frac{1}{425}
    \end{align*}

    \item

    \begin{align*}
        P((X_1, \dots, X_3) ~\text{contains exactly one pair})
        =
        \frac{3}{51} \frac{48}{50}
        +
        \frac{48}{51} \frac{3}{50}
        +
        \frac{48}{51} \frac{3}{50}
        =
        3 \cdot \frac{3 \cdot 48}{51 \cdot 50}
        =
        \frac{72}{425}
    \end{align*}

    \begin{center}
        \begin{tikzpicture}

            \draw (0, 0) node [above] {$r_1$};
                \draw (0, 0) -- node [above left] {$\nicefrac{3}{51}$} (-4, -1) node [above left] {$r_1 = r_2$};
                    \draw (-4, -1) -- node [above left]  {$\nicefrac{2}{50}$}  (-6, -2) node [below] {$r_1 = r_2 = r_3 = r_1$};
                    \draw (-4, -1) -- node [above right] {$\nicefrac{48}{50}$} (-2, -2) node [below] {$r_1 = r_2 \neq r_3 \neq r_1$};
                \draw (0, 0) -- node [above left] {$\nicefrac{48}{51}$} (4, -1) node [above right] {$r_1 \neq r_2$};
                    \draw (4, -1) -- node [above left]  {$\nicefrac{3}{50}$}  (2, -2) node [below] {$r_1 \neq r_2 \neq r_3 = r_1$};
                    \draw (4, -1) -- node [below right] {$\nicefrac{3}{50}$}  (4, -4) node [below] {$r_1 \neq r_2 = r_3 \neq r_1$};
                    \draw (4, -1) -- node [above right] {$\nicefrac{44}{50}$} (6, -2) node [below] {$r_1 \neq r_2 \neq r_3 \neq r_1$};

        \end{tikzpicture}
    \end{center}

    \begin{comment}

        Achtung Falsch!!!

        \begin{align*}
            &
            P((X_1, \dots, X_3) ~\text{contains exactly one pair}) \\
            & =
            P(|\Bbraces{r_1, \dots, r_3}| = 2) \\
            & =
            P(r_1 = r_2 \neq r_3) \\
            & +
            P(r_2 = r_3 \neq r_1) \\
            & +
            P(r_3 = r_1 \neq r_2) \\
            & =
            \sum_{r_1 \in R} \sum_{r_2 \in R \setminus \Bbraces{r_1}}
                P(r_1 = r_2 = r_1, r_3 = r_2) \\
            & +
            \sum_{r_1 \in R} \sum_{r_2 \in R \setminus \Bbraces{r_1}}
                P(r_2 = r_3 = r_2, r_1 = r_1) \\
            & +
            \sum_{r_1 \in R} \sum_{r_2 \in R \setminus \Bbraces{r_1}}
                P(r_3 = r_1 = r_1, r_2 = r_2) \\
            & =
            \sum_{r_1 \in R} \sum_{r_2 \in R \setminus \Bbraces{r_1}} \\
                & P(r_1 = r_1) P(r_2 = r_1 \mid r_1 = r_1) P(r_3 = r_2 \mid r_1 = r_1, r_2 = r_1)
                + \\
                & P(r_1 = r_1) P(r_2 = r_2 \mid r_1 = r_1) P(r_3 = r_2 \mid r_1 = r_1, r_2 = r_2)
                + \\
                & P(r_1 = r_2) P(r_2 = r_2 \mid r_1 = r_1) P(r_3 = r_2 \mid r_1 = r_1, r_2 = r_2) \\
            & =
            |R| (|R| - 1)
            \pbraces
            {
                \frac{4}{52} \frac{3}{51} \frac{12 \cdot 4}{50}
                +
                \frac{4}{52} \frac{12 \cdot 4}{51} \frac{12 \cdot 4 - 1}{50}
                +
                \frac{4}{52} \frac{12 \cdot 4}{51} \frac{3}{50}
            } \\
            & =
            13 \cdot 12 \frac{1}{13} 
            \pbraces
            {
                \frac{3}{51} \frac{12 \cdot 4}{50}
                +
                \frac{12 \cdot 4}{51} \frac{12 \cdot 4 - 1}{50}
                +
                \frac{12 \cdot 4}{51} \frac{3}{50}
            } \\
            & = 12 \frac{3 \cdot 48 + 48 \cdot 47 + 48 \cdot 3 }{50 \cdot 51} = 4 \cdot 24 \frac{3 + 47 + 3}{25 \cdot 17} = \frac{53 \cdot 96}{25 \cdot 17} > 1
        \end{align*}

    \end{comment}

\end{enumerate}

\end{solution}

% --------------------------------------------------------------------------------
