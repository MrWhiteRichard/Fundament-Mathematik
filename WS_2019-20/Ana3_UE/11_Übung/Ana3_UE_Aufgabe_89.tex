\begin{exercise}

Bis zu welcher Ordnung sind die Funktionen $f: \R \mapsto \R$

\begin{equation*}
    f(x) = |x|, \hspace{10pt} f(x) =
    \begin{cases}
    0 & x \leq 0, \\
    x^2 & 0 < x < 1, \\
    ax - 1 & x \geq 1, \\
    \end{cases}
\end{equation*}

$a \in \mathbb{R}$ schwach differenzierbar? Berechnen Sie die schwachen Ableitungen. \\

Zeigen Sie: Für $u(\textbf{x}) = \log|\textbf{x}|$ und $\nu_i(\textbf{x}) = \frac{x_i}{|\textbf{x}|^2}$ ist $\nu_i$ die schwache Ableitung $D^iu$ in $\mathbb{R}^n$.

\end{exercise}

\begin{solution}

Widmen wir uns vorerst der Betragsfunktion $f(x) = |x|$ und erraten ihre schwache Ableitung $\sgn$. Nachdem $\id$ sogar klassisch differenzierbar ist, so auch schwach, laut Blümlinger Proposition 6.1.3. Wir rechnen die Definition der schwachen Ableigung nach, also $\Forall \phi \in C_c^\infty(\R):$

\begin{align*}
  \Int{\sgn(x) \phi(x)}{\lambda(x)}
  & = - \Int[\R^-]{\phi(x)}{\lambda(x)}
      + \Int[\R^+]{\phi(x)}{\lambda(x)} \\
  & = \Int[\R^-]{x \phi^\prime(x)}{\lambda(x)} +
      \Int[\R^+]{-x \phi^\prime(x)}{\lambda(x)} \\
  & = - \Int{|x| \phi^\prime(x)}{\lambda(x)}.
\end{align*}

Laut Blümlinger Proposition 6.1.4 gilt: Für $n = 1$ ist eine Funktion genau dann schwach differnezierbar, wenn sie f.ü. mit einer lokal absolut stetigen Funktion übereinstimmt. In diesem Fall ist die schwache Ableitung genau die f.ü. existierende lokal integrierbare Ableitung dieser lokal absolut stetigen Funktion.

\begin{align*}
  f \: \text{schwach differenzierbar}
  \Leftrightarrow
  \Exists g \: \text{lokal absolut stetig}: g = f \: \fastueberall
\end{align*}

\begin{align*}
  f \: \text{lokal absolut stetig}
  : \Leftrightarrow
  \Forall K \subseteq \R, \: \text{kompakt}:
  f|_K \: \text{absolut stetig}
\end{align*}

\begin{align*}
  g|_K \: \text{absolut stetig}
  : \Leftrightarrow
  \Forall \epsilon > 0: \Exists \delta > 0:
  \Forall (]a_i, b_i[)_{i=1}^n \subseteq K^n, \: \text{disjunkt}: \\
  \sum_{i=1}^n |b_i - a_i| < \delta
  \Rightarrow
  \sum_{i=1}^n |g|_K(b_i) - g|_K(a_i)| < \epsilon
\end{align*}

Daraus folgt, dass $\sgn$ nicht mehr schwach differenzierbar ist. Sei sonst $g = f$ f.ü., $\delta > 0$ beliebig und $K := [-1, 1]$. Seinen weiters $N := (- \delta/2, 0)$ und $P := (0, \delta/2)$. \\

Wegen $\lambda(P), \lambda(N) = \frac{\delta}{2} > 0$, sind $P$ und $N$ keine $\lambda$-Nullmengen. Die Wahl $\epsilon \leq 2$ schließt somit die absolute Stetigkeit von $g|_K$ aus, weil $\Forall a \in N, \Forall b \in P:$

\begin{align*}
  |g|_K(b) - g|_K(a)| = |\sgn(b) - \sgn(a)| = 2 \nless \epsilon.
\end{align*}

Man kann ähnlich überprüfen, dass für $a \neq 2$ die andere Funktion $f$ nie $f = g$ f.ü. mit $g$ absolut stetig. Laut Blümlinger Proposition 6.1.3, erhalten wir für $a = 2$ die schwache bzw. klassische Ableitung, weil dann $f \in C(\R)$,

\begin{align*}
  Df =
  \begin{cases}
    0  & x \leq 0,  \\
    2x & 0 < x < 1, \\
    2  & x \geq 1.
  \end{cases}
\end{align*}

Diese Funktion ist lokal absolutstetig, daher können wir auch die zweite schwache bzw. klassische Ableitung berechnen.

\begin{align*}
  D^2 f = 2 \cdot \1_{\pbraces{1, 2}}
\end{align*}

Dafür betrachten wir $\varphi \in C^{\infty}_c$ beliebig, mit $T \in \R: \supp \varphi \in \bbraces{-T, T}$. Durch partielle
Integration erhalten wir

\begin{align*}
    \int_\R f \varphi^{\prime \prime} d \lambda
    & = - \int_\R D^2f \varphi^\prime d \lambda \\
    & = - \int_0^1 2x \varphi^\prime d \lambda
        - \int_1^T 2 \varphi^\prime d \lambda \\
    & = - 2 \varphi(1)
        + \int_0^1 2 \varphi d \lambda
        + 2 \varphi(1) \\
    & = \int_\R \1_{\pbraces{1, 2}} 2 \varphi d \lambda.
\end{align*}

Damit ist die maximale Ordnung der schwachen Ableitung zwei, da in $0, 1$ Sprungstellen existieren. \\

Um zuletzt zu zeigen, dass $\nu_i$ wirklich die schwache Ableitung von $u$ ist, bemerken wir, dass beide Funktionen nur auf dem offenen $\R^n \setminus \{ 0 \}$ definiert sind. Weil $u$ auf dieser Menge stetig differenzierbar ist, stimmt die schwache Ableitung mit der klassischen überein.

\begin{align*}
    u(\textbf{x}) = \log(\sqrt{\sum_{j=1}^n x_j^2})
\end{align*}

\begin{align*}
    D_i u(\textbf{x})
  = \frac{\partial}{\partial x_i} \log(\sqrt{\sum_{i=1}^n x_i^2})
  = \frac{1}{\vbraces{\textbf{x}}} \frac{\partial}{\partial x_i}
    \sqrt{\sum_{j=1}^n x_j^2}
  = \frac{1}{\vbraces{\textbf{x}}} \frac{2x_i}{2\vbraces{\textbf{x}}}
  = \nu_i
\end{align*}
\end{solution}
