\section{Statement and proof of Wigner's Theorem}

If for Hilbert spaces $H_1$ and $H_2$ we consider an isometry $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ we mean in this section a function from $\mathcal{P}(H_1)$ to $\mathcal{P}(H_2)$ which is isometric with respect to the metric $d$ from Lemma \ref{lemma:projective_metric}.


\begin{example} \label{example:zerodim}
	Let $H_1$ and $H_2$ be Hilbert spaces where $H_1 = \{0\}$ and let $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ be an isometry. Obviously, we have $\mathcal{P}(H_1) = \emptyset$. By defining $U: H_1 \to H_2$ as the zero operator, we observe that $U$ is linear as well as antilinear and both unitary and antiunitary. Furthermore, the statement $Ux \in g\pbraces{\C x}$ is true for every $x \in H_1 \setminus \{0\}$, simply because no such $x$ exists.
\end{example}


\begin{example} \label{example:onedim}
	Let $H_1$ and $H_2$ be Hilbert spaces where $\dim H_1 = 1$ and let $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ be an isometry. Due to the fact that $\mathcal{P}(H_1) = \{H_1\}$ there exists only one ray in $\mathcal{P}(H_1)$. Take a normalized $x \in H_1$ and a normalized $y \in g(H_1)$. We define $U: H_1 \to H_2$ by $\lambda x \mapsto \lambda y$ and $T: H_1 \to H_2$ by $\lambda x \mapsto \overline{\lambda} y$. For any $\lambda \in \C$ we have
	\begin{align*}
		\norm[H_2]{U\lambda x} = \norm[H_2]{\lambda y} = \vbraces{\lambda} \norm[H_2]{y} = \vbraces{\lambda} = \vbraces{\lambda} \norm[H_1]{x} = \norm[H_1]{\lambda x}
	\end{align*}
	and 
	\begin{align*}
		\norm[H_2]{T\lambda x} = \norm[H_2]{\overline{\lambda} y} = \vbraces{\lambda} \norm[H_2]{y} = \vbraces{\lambda} = \vbraces{\lambda} \norm[H_1]{x} = \norm[H_1]{\lambda x}.
	\end{align*}
	Hence, $U$ is unitary and $T$ is antiunitary. Furthermore, we clearly have $Ux \in g\pbraces{\C x}$ for every $x \in H_1 \setminus \{0\}$. 
\end{example}


\begin{lemma} \label{lemma:phase_adjustment_ray}
	Let $H_1$ and $H_2$ be Hilbert spaces and let $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ be an isometry. For two vectors $x,y \in H_1$ with $(y,x)_{H_1} \neq 0$ and a vector $\tilde{x} \in g(\C x)$ with $\norm[H_2]{\tilde{x}} = \norm[H_1]{x}$ there exists a unique $\tilde{y} \in g(\C y)$ that satisfies $\norm[H_2]{\tilde{y}} = \norm[H_1]{y}$ and $(\tilde{y},\tilde{x})_{H_2} = |(\tilde{y},\tilde{x})_{H_2}| $.
\end{lemma}

\begin{proof}
	Take an arbitrary vector $\tilde{w} \in g(\C y)$ with $\norm[H_2]{\tilde{w}} = \norm[H_1]{\tilde{x}}$ and define $\mu := (\tilde{w}, \tilde{x})_{H_2}$. By \eqref{eq:vector_isometry} we have $|\mu| = |(\tilde{w},\tilde{x})_{H_2}| = |(y,x)_{H_1}| \neq 0$. Hence, we obtain $\mu \in \C \setminus \{0\}$. According to Lemma \ref{lemma:phase_adjustment_complex} there exists a unique $\lambda \in \C$ with $|\lambda| = 1$ such that $|\mu| = \lambda \mu$. For $\tilde{y} := \lambda \tilde{w}$ we obtain
	\begin{align*}
		(\tilde{y}, \tilde{x})_{H_2} = \lambda (\tilde{w}, \tilde{x})_{H_2} = \lambda \mu = |\mu| = \vbraces{\lambda}|(\tilde{w}, \tilde{x})_{H_2}| = |(\tilde{y},\tilde{x})_{H_2}|
	\end{align*}
	and $\norm[H_2]{\tilde{y}} = |\lambda| \norm[H_2]{\tilde{w}} = \norm[H_1]{y}$.
	
	For another vector $\tilde{z} \in g\pbraces{\C y}$ with $\norm[H_2]{\tilde{z}} = \norm[H_1]{y}$ and $\pbraces{\tilde{z}, \tilde{x}}_{H_2} = \vbraces{\pbraces{\tilde{z}, \tilde{x}}_{H_2}}$ we have $\tilde{z} = \nu \tilde{y}$ for some $\nu \in \C \setminus \{0\}$. From 
	\begin{align*}
		\norm[H_1]{y} = \norm[H_2]{\tilde{z}} = \norm[H_2]{\nu \tilde{y}} = \vbraces{\nu} \norm[H_2]{\tilde{y}} = \vbraces{\nu} \norm[H_1]{y}.
	\end{align*}
	we conclude $\vbraces{\nu} = 1$. Furthermore, from 
	\begin{align*}
		\vbraces{\nu} \vbraces{\pbraces{y,x}_{H_1}} = \vbraces{\nu} \vbraces{\pbraces{\tilde{y}, \tilde{x}}_{H_2}} = \vbraces{\pbraces{\tilde{z}, \tilde{x}}_{H_2}} = \pbraces{\tilde{z}, \tilde{x}}_{H_2} = \nu \pbraces{\tilde{y}, \tilde{x}}_{H_2} = \nu \vbraces{\pbraces{\tilde{y}, \tilde{x}}_{H_2}} = \nu \vbraces{\pbraces{y, x}_{H_1}}
	\end{align*}
	and the assumption $\pbraces{y,x} \neq 0$ we obtain $\nu = \vbraces{\nu} = 1$. Thus, $\tilde{z} = \nu \tilde{y} = \tilde{y}$. 
\end{proof}


\begin{lemma} \label{lemma:aux_main}
	Let $H_1$ and $H_2$ be Hilbert spaces and $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ an isometry. Let $M = \{e_j \mid j \in J\}$ be an orthonormal basis of $H_1$ and for every $j \in J$ let $\tilde{e}_j \in g(\C e_j)$ be a normalized vector. Furthermore, let $x \in H_1$ with
	\begin{align*}
		x = \sum_{j \in J} \lambda_j e_j.
	\end{align*} 
	If $k \in J$ such that $\lambda_k \in \C \setminus \{0\}$ and $\zeta: \C \to \C$ with $\vbraces{\lambda_k} = \vbraces{\zeta\pbraces{\lambda_k}}$, then there exists a unique $\tilde{x} \in g(\C x)$ such that
	\begin{align*}
		\tilde{x} = \zeta(\lambda_k) \tilde{e}_k + \sum_{j \in J \setminus \{k\}} \pbraces{\tilde{x}, \tilde{e_j}}_{H_2} \tilde{e}_j.
	\end{align*}
	This vector $\tilde{x} \in g(\C x)$ satisfies $\norm[H_2]{\tilde{x}} = \norm[H_1]{x}$. If we define $\mu_j := \pbraces{\tilde{x}, \tilde{e_j}}_{H_2}$ for all $j \in J \setminus \{k\}$, then we have $\vbraces{\mu_j} = \vbraces{\lambda_j}$ for all $j \in J \setminus \{k\}$ and
	\begin{align*}
		\tilde{x} = \zeta(\lambda_k) \tilde{e}_k + \sum_{j \in J \setminus \{k\}} \mu_j \tilde{e}_j.
	\end{align*}
\end{lemma}

\begin{proof}
	We first observe that for every $l \in J$ 
	\begin{align}
		\pbraces{x, e_l}_{H_1} &= \pbraces{\sum_{j \in J} \lambda_j e_j, e_l}_{H_1} = \sum_{j \in J} \lambda_j \pbraces{e_j, e_l}_{H_1} = \lambda_l \label{eq:aux_fouriercoef}
	\end{align}
	As $\lambda_k \neq 0$ we can employ Lemma \ref{lemma:phase_adjustment_ray} and \eqref{eq:vector_isometry} in order to obtain a unique $\tilde{w} \in g(\C x)$ with $\norm[H_2]{\tilde{w}} = \norm[H_1]{x}$ and 
	\begin{align*}
		(\tilde{w}, \tilde{e}_k)_{H_2} = |(\tilde{w}, \tilde{e}_k)_{H_2}| = |(x, e_k)_{H_1}| = \vbraces{\lambda_k}.
	\end{align*}
	By Lemma \ref{lemma:phase_adjustment_complex} there exists a unique $\nu \in \C$ with $\vbraces{\nu} = 1$ and $\vbraces{\lambda_k} = \nu \zeta\pbraces{\lambda_k}$. We define
	\begin{align*}
		\tilde{x} := \frac{1}{\nu} \tilde{w} \quad \text{and find} \quad (\tilde{x}, \tilde{e}_k)_{H_2} = \frac{1}{\nu} (\tilde{w}, \tilde{e}_k)_{H_2} = \frac{1}{\nu} |\lambda_k| = \frac{1}{\nu} \nu \zeta(\lambda_k) = \zeta(\lambda_k).
	\end{align*} 
	Finally, by \eqref{eq:ran_fourier} we obtain
	\begin{align*}
		\tilde{x} = \sum_{j \in J} (\tilde{x}, \tilde{e}_j)_{H_2} \tilde{e}_j = \zeta(\lambda_k) \tilde{e}_k + \sum_{j \in J \setminus \{k\}} (\tilde{x}, \tilde{e}_j)_{H_2} \tilde{e}_j \quad \text{and} \quad \norm[H_2]{\tilde{x}} = \norm[H_2]{\frac{1}{\nu}\tilde{w}} = \vbraces{\frac{1}{\nu}} \norm[H_2]{\tilde{w}} = \norm[H_1]{x}. 
	\end{align*}
	Consider another $\tilde{y} \in g\pbraces{\C x}$ with
	\begin{align*}
		\tilde{y} = \zeta(\lambda_k) \tilde{e}_k + \sum_{j \in J \setminus \{k\}} \pbraces{\tilde{y}, \tilde{e}_j}_{H_2} \tilde{e}_j.
	\end{align*}
	We have $\tilde{y} = \mu \tilde{x}$ for some $\mu \in \C \setminus \{0\}$. From 
	\begin{align*}
		\mu \zeta\pbraces{\lambda_k} = \mu \pbraces{\tilde{x}, \tilde{e}_k}_{H_2} = \pbraces{\tilde{y}, \tilde{e}_k}_{H_2} = \zeta\pbraces{\lambda_k}
	\end{align*}
	we conclude $\mu = 1$. Thus, $\tilde{x} = \tilde{y}$. 
	
	Finally, by \eqref{eq:vector_isometry} we have for all $j \in J \setminus \{k\}$
	\begin{align*}
		\vbraces{\mu_j} = \vbraces{\pbraces{\tilde{x}, \tilde{e_j}}_{H_2}} = \vbraces{\pbraces{x, e_j}_{H_1}} = \vbraces{\lambda_j}.
	\end{align*}
\end{proof}


\begin{lemma} \label{lemma:function_on_onb}
	Let $H_1$ and $H_2$ be Hilbert spaces with $\dim H_1 > 1$ and $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ an isometry. Furthermore, let $M = \{e_j \mid j \in J\}$ be an orthonormal basis of $H_1$. For $q \in J$ we define for all $j \in J \setminus \{q\}$ the vectors
	\begin{align*}
		v_{qj} := \frac{1}{\sqrt{2}} (e_q + e_j), \qquad w_{qj} := \frac{1}{\sqrt{2}}(e_q + ie_j), \qquad w_{jq} := \frac{1}{\sqrt{2}}(e_j + ie_q).
	\end{align*} 
	Assume that $\tilde{e}_q \in g\pbraces{\C e_q}$ is a given normalized vector. Then for every $k \in J \setminus \{q\}$ there exists a normalized $\tilde{e}_k \in g(\C e_k)$, a normalized $\tilde{v}_{qk} \in g(\C v_{qk})$, a normalized $\tilde{w}_{qk} \in g(\C w_{qk})$, a normalized $\tilde{w}_{kq} \in g(\C w_{kq})$, and $\lambda_k \in \{i, -i\}$ such that
	\begin{align*}
		\tilde{v}_{qk} = \frac{1}{\sqrt{2}}(\tilde{e}_{q} + \tilde{e}_k), \qquad \tilde{w}_{qk} = \frac{1}{\sqrt{2}}(\tilde{e}_q + \lambda_k \tilde{e}_k), \qquad \tilde{w}_{kq} = \frac{1}{\sqrt{2}} (\tilde{e}_k + \lambda_k \tilde{e}_q).
	\end{align*}
\end{lemma}

\begin{proof}
	First observe that for every $j \in J$ and every $k \in J \setminus \{q\}$ we have
	\begin{align*}
		\pbraces{v_{qk}, e_j}_{H_1} = \pbraces{\frac{1}{\sqrt{2}}(e_q + e_k), e_j}_{H_1} =
		\begin{cases}
			\frac{1}{\sqrt{2}} &, \text{if } j \in \{q,k\}, \\
			0 &, \text{else}.
		\end{cases}
	\end{align*}
	Hence, we can employ Lemma \ref{lemma:phase_adjustment_ray} and \eqref{eq:vector_isometry} in order to obtain a unique, normalized $\tilde{v}_{qk} \in g(\C v_{qk})$ with
	\begin{align*}
		(\tilde{v}_{qk}, \tilde{e}_q)_{H_2} = \vbraces{(\tilde{v}_{qk}, \tilde{e}_q)_{H_2}} = \vbraces{(v_{qk}, e_q)_{H_1}} = \frac{1}{\sqrt{2}}.
	\end{align*}
	Again by Lemma \ref{lemma:phase_adjustment_ray} together with \eqref{eq:vector_isometry} we find a unique, normalized $\tilde{e}_{k} \in g(\C e_k)$ such that
	\begin{align*}
		\pbraces{\tilde{v}_{qk}, \tilde{e}_k}_{H_2} = \vbraces{\pbraces{\tilde{v}_{qk}, \tilde{e}_k}_{H_2}} = \vbraces{\pbraces{v_{qk}, e_k}_{H_1}} = \frac{1}{\sqrt{2}}.
	\end{align*}
	For all $j \in J \setminus \{q, k\}$ we obtain
	\begin{align*}
		\vbraces{\pbraces{\tilde{v}_{qk}, \tilde{e}_j}_{H_2}} = \vbraces{\pbraces{v_{qk}, e_j}_{H_1}} = 0.
	\end{align*}
	From \eqref{eq:ran_fourier} we derive
	\begin{align*}
		\tilde{v}_{qk} = \sum_{j \in J} (\tilde{v}_{qk}, \tilde{e}_j)_{H_2} \tilde{e}_j = \frac{1}{\sqrt{2}} (\tilde{e}_q + \tilde{e}_k).
	\end{align*}
	
	
	By Lemma \ref{lemma:aux_main} there exist $\tilde{w}_{qk} \in g(\C w_{qk})$ and $\tilde{w}_{kq} \in g(\C w_{kq})$ with
	\begin{align*}
		\tilde{w}_{qk} = \frac{1}{\sqrt{2}}(\tilde{e}_q + \lambda_k \tilde{e}_k), \quad \tilde{w}_{kq} = \frac{1}{\sqrt{2}}(\tilde{e}_k + \lambda_q \tilde{e}_q)
	\end{align*}
	and $\vbraces{\lambda_q} = \vbraces{\lambda_k} = 1$. We have
	\begin{align*}
		\frac{1}{\sqrt{2}}\vbraces{1 + \lambda_k} &= \vbraces{\pbraces{\frac{1}{\sqrt{2}}(\tilde{e}_q + \lambda_k \tilde{e}_k), \frac{1}{\sqrt{2}} (\tilde{e}_q + \tilde{e}_k)}_{H_2}} = \vbraces{\pbraces{\tilde{w}_{qk}, \tilde{v}_{qk}}_{H_2}} \\
		&= \vbraces{\pbraces{w_{qk}, v_{qk}}_{H_1}} = \vbraces{\pbraces{\frac{1}{\sqrt{2}}(e_q + ie_k), \frac{1}{\sqrt{2}} (e_q + e_k)}_{H_1}} = \frac{1}{\sqrt{2}} \vbraces{1 + i} = 1
	\end{align*}
	and similarly $\vbraces{1 + \lambda_q} = \sqrt{2}$. By Lemma \ref{lemma:complex_geom} we obtain $\lambda_k, \lambda_q \in \{i, -i\}$. From
	\begin{align*}
		\frac{1}{2}\vbraces{\lambda_k + \overline{\lambda_q}} &= \vbraces{\pbraces{\frac{1}{\sqrt{2}}(\tilde{e}_q + \lambda_k \tilde{e}_k), \frac{1}{\sqrt{2}}(\tilde{e}_k + \lambda_{q} \tilde{e}_q)}_{H_2}} = \vbraces{\pbraces{\tilde{w}_{qk}, \tilde{w}_{kq}}_{H_2}} \\
		&= \vbraces{\pbraces{w_{qk}, w_{kq}}_{H_1}} = \vbraces{\pbraces{\frac{1}{\sqrt{2}}(e_q + i e_k), \frac{1}{\sqrt{2}}(e_k + i e_q)}_{H_1}} = \frac{1}{2}\vbraces{i - i} = 0
	\end{align*}
	together with $\lambda_k, \lambda_q \in \{i, -i\}$ we conclude that $\lambda_k = \lambda_q$.
\end{proof}


\begin{example} \label{example:twodim}
	Let $H_1$ and $H_2$ be Hilbert spaces with $\dim H_1 = 2$ and $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ an isometry. We consider an orthonormal basis $M = \{e_1, e_2\}$ of $H_1$ and define
	\begin{align*}
		v := \frac{1}{\sqrt{2}}(e_1 + e_2), \qquad w_{12} := \frac{1}{\sqrt{2}}(e_1 + i e_2), \qquad  w_{21} := \frac{1}{\sqrt{2}}(e_2 + i e_1).
	\end{align*} 
	From Lemma \ref{lemma:function_on_onb} we know that there exist $\tilde{e}_1 \in g(\C e_1)$, $\tilde{e}_2 \in g(\C e_2)$, $\tilde{v} \in g(\C v)$, $\tilde{w}_{12} \in g(\C w_{12})$, $\tilde{w}_{21} \in g(\C w_{21})$ and $\lambda \in \{i, -i\}$ with
	\begin{align*}
		\tilde{v} = \frac{1}{\sqrt{2}}(\tilde{e}_1 + \tilde{e}_2), \qquad \tilde{w}_{12} = \frac{1}{\sqrt{2}}(\tilde{e}_1 + \lambda \tilde{e}_2), \qquad \tilde{w}_{21} = \frac{1}{\sqrt{2}}(\tilde{e}_2 + \lambda \tilde{e}_1).
	\end{align*} 
	If $\lambda = i$ then we define $\zeta := \id_\C$ and if $\lambda = -i$ then we define $\zeta$ as the complex conjugation. Either way we have $\lambda = \zeta(i)$.
	
	We are going to define $U:H_1 \to H_2$. First of all set $U0 := 0$. For an arbitrary $z \in H_1 \setminus \{0\}$ there exist $\lambda_1, \lambda_2 \in \C$ with $z = \lambda_1 e_1 + \lambda_2 e_2$ where $\lambda_r \neq 0$ for some $r \in \{1,2\}$. Let $s \in \{1, 2\} \setminus \{r\}$. By Lemma \ref{lemma:aux_main} there exists a unique $\tilde{z} \in g(\C z)$ with 
	\begin{align*}
		\tilde{z} = \zeta(\lambda_r) \tilde{e}_r + \pbraces{\tilde{z}, \tilde{e}_s}_{H_2} \tilde{e}_s
	\end{align*}
	and this vector satisfies $\norm[H_2]{\tilde{z}} = \norm[H_1]{z}$. First we define $\nu_s := \zeta^{-1}\pbraces{\pbraces{\tilde{z}, \tilde{e}_s}_{H_2}}$ and then
	\begin{align*}
		Uz := \tilde{z} = \zeta(\lambda_r) \tilde{e}_r + \zeta(\nu_s) \tilde{e}_s.
	\end{align*}
	We find 
	\begin{align*}
		\frac{1}{\sqrt{2}} \vbraces{\lambda_r + \nu_s} = \frac{1}{\sqrt{2}} \vbraces{\zeta(\lambda_r + \nu_s)}= \vbraces{\pbraces{\tilde{z}, \tilde{v}}_{H_2}} = \vbraces{\pbraces{z, v}_{H_1}} = \frac{1}{\sqrt{2}} \vbraces{\lambda_r + \lambda_s}
	\end{align*}
	and for
	\begin{align*}
		y := \frac{1}{\sqrt{2}}(e_r + ie_s) \quad \text{and} \quad \tilde{y} := \frac{1}{\sqrt{2}} (\tilde{e}_r + \zeta(i) \tilde{e}_s)
	\end{align*} 
	we have
	\begin{align*}
		\frac{1}{\sqrt{2}}\vbraces{\lambda_r - i\nu_s} &= \frac{1}{\sqrt{2}} \vbraces{\zeta(\lambda_r) + \overline{\zeta(i)} \zeta(\nu_s)}= \vbraces{\pbraces{\tilde{z}, \tilde{y}}_{H_2}} \\
		&= \vbraces{\pbraces{z, y}_{H_1}} = \vbraces{\pbraces{\lambda_r e_r + \lambda_s e_s, \frac{1}{\sqrt{2}}(e_r + ie_s)}_{H_1}} = \frac{1}{\sqrt{2}} \vbraces{\lambda_r - i\lambda_s}.
	\end{align*}
	As
	\begin{align*}
		\vbraces{\nu_s} = \vbraces{\zeta^{-1}\pbraces{\pbraces{\tilde{z}, \tilde{e}_s}_{H_2}}} = \vbraces{\pbraces{\tilde{z}, \tilde{e}_s}_{H_2}} = \vbraces{\pbraces{z, e_s}_{H_1}} = \vbraces{\lambda_s}
	\end{align*} 
	we can employ Lemma \ref{lemma:complex_alg} in order to obtain $\lambda_s = \nu_s$. Hence, we have
	\begin{align*}
		Uz = \zeta(\lambda_1) \tilde{e}_1 + \zeta(\lambda_2) \tilde{e}_2.
	\end{align*}
	and
	\begin{align*}
		\norm[H_2]{Uz}^2 = \norm[H_2]{\zeta\pbraces{\lambda_1} \tilde{e}_1 + \zeta\pbraces{\lambda_2} \tilde{e}_2}^2 = \vbraces{\zeta\pbraces{\lambda_1}}^2 + \vbraces{\zeta\pbraces{\lambda_2}}^2 = \vbraces{\lambda_1}^2 + \vbraces{\lambda_2}^2 = \norm[H_1]{\lambda_1 e_1 + \lambda_2 e_2}^2 = \norm[H_1]{z}^2.
	\end{align*}
\end{example}


\begin{lemma} \label{lemma:aux_last}
	Let $H_1$ and $H_2$ be Hilbert spaces with $\dim H_1 >2$ and $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ an isometry. Let $\{e_j \mid j \in J\}$ be an orthonormal basis of $H_1$ and for all distinct $k,l \in J$ set
	\begin{align*}
		v_{kl} := \frac{1}{\sqrt{2}}(e_k + e_l) \quad \text{and} \quad w_{kl} := \frac{1}{\sqrt{2}}(e_k + ie_l).
	\end{align*}
	Then for all $j \in J$ there exists $\tilde{e}_j \in g(\C e_j)$, for all distinct $k,l \in J$ there exists a normalized $\tilde{v}_{kl} \in g(\C v_{kl})$, a normalized $\tilde{w}_{kl} \in g(\C w_{kl})$ and $\lambda_{kl} \in \{-i, i\}$ such that 
	\begin{align*}
		\tilde{v}_{kl} = \frac{1}{\sqrt{2}}(\tilde{e}_k + \tilde{e}_l) \quad \text{and} \quad \tilde{w}_{kl} = \frac{1}{\sqrt{2}}(\tilde{e}_k + \lambda_{kl} \tilde{e}_l),
	\end{align*}
	where $\lambda_{kl} = \lambda_{lk}$.
\end{lemma}

\begin{proof}
	Choose $q \in J$ and a normalized $\tilde{e}_q \in g\pbraces{\C e_q}$. By Lemma \ref{lemma:function_on_onb} there exist $\tilde{e}_j \in g(\C e_j)$, $\tilde{v}_{qj} \in g(\C v_{qj})$, $\tilde{w}_{qj} \in g(\C w_{qj})$, $\tilde{w}_{jq} \in g(\C w_{jq})$ and $\lambda_{jq} = \lambda_{qj} \in \{i, -i\}$ with
	\begin{align*}
	\tilde{v}_{qj} = \frac{1}{\sqrt{2}}(\tilde{e}_q + \tilde{e}_j), \qquad \tilde{w}_{qj} = \frac{1}{\sqrt{2}}(\tilde{e}_q + \lambda_{qj}\tilde{e}_j), \qquad \tilde{w}_{jq} = \frac{1}{\sqrt{2}}(\tilde{e}_j + \lambda_{jq} \tilde{e}_q).
	\end{align*} 
	 for every $j \in J \setminus \{q\}$. We set $\tilde{v}_{jq} := \tilde{v}_{qj}$. For distinct $k,l \in J \setminus \{q\}$ we define
	\begin{align*}
	x_{kl} := \frac{1}{\sqrt{3}}(e_q + e_k + e_l). 
	\end{align*} 
	Note that because of $\dim H_1 > 2$ such a choice of $k,l$ is possible. By Lemma \ref{lemma:aux_main} there exists $\tilde{x}_{kl} \in g(\C x_{kl})$ such that 
	\begin{align*}
	\tilde{x}_{kl} = \frac{1}{\sqrt{3}} \pbraces{\tilde{e}_q + \mu_{k} \tilde{e}_k + \mu_{l} \tilde{e}_l} 
	\end{align*}
	and $\vbraces{\mu_k} = \vbraces{\mu_l} = 1$. Next, observe that for $j \in \{k,l\}$
	\begin{align*}
	\frac{1}{\sqrt{6}} \vbraces{1 + \mu_j} &= \vbraces{\pbraces{\frac{1}{\sqrt{3}} \pbraces{\tilde{e}_q + \mu_k \tilde{e}_k + \mu_l \tilde{e}_l}, \frac{1}{\sqrt{2}} \pbraces{\tilde{e}_q + \tilde{e}_j}}_{H_2}} = |(\tilde{x}_{kl}, \tilde{v}_{qj})_{H_2}| \\
	&= |(x_{kl}, v_{qj})_{H_1}| = \vbraces{\pbraces{\frac{1}{\sqrt{3}} \pbraces{e_q + e_k + e_l}, \frac{1}{\sqrt{2}} (e_q + e_j)}_{H_1}} = \frac{2}{\sqrt{6}}.
	\end{align*}
	Employing Lemma \ref{lemma:complex_geom} we obtain $\mu_k = \mu_l = 1$ and therefore
	\begin{align*}
	\tilde{x}_{kl} = \frac{1}{\sqrt{3}}(\tilde{e}_q + \tilde{e}_k + \tilde{e}_l).
	\end{align*}
	Making use of Lemma \ref{lemma:aux_main} again we obtain $\tilde{v}_{kl} \in g(\C v_{kl})$ and $\tilde{w}_{kl} \in g(\C w_{kl})$ satisfying
	\begin{align*}
	\tilde{v}_{kl} = \frac{1}{\sqrt{2}}(\tilde{e}_k + \nu_l \tilde{e}_l) \quad \text{and} \quad \tilde{w}_{kl} = \frac{1}{\sqrt{2}}(\tilde{e}_k + \lambda_{kl} \tilde{e}_l),
	\end{align*}
	where $\vbraces{\nu_l} = \vbraces{\lambda_{kl}}$. Due to 
	\begin{align*}
		\frac{1}{\sqrt{6}}\vbraces{1 + \nu_l} &= \vbraces{\pbraces{\frac{1}{\sqrt{2}}(\tilde{e}_k + \nu_l \tilde{e}_l), \frac{1}{\sqrt{3}}(\tilde{e}_q + \tilde{e}_k + \tilde{e}_l)}_{H_2}} = \vbraces{\pbraces{\tilde{v}_{kl}, \tilde{x}_{kl}}_{H_2}} \\
		&= \vbraces{\pbraces{v_{kl}, x_{kl}}_{H_1}} = \vbraces{\pbraces{\frac{1}{\sqrt{2}}(e_k + e_l), \frac{1}{\sqrt{3}}(e_q + e_k + e_l)}_{H_1}} = \frac{2}{\sqrt{6}}
	\end{align*}
	and 
	\begin{align*}
		\frac{1}{\sqrt{6}}\vbraces{1 + \lambda_{kl}} &= \vbraces{\pbraces{\frac{1}{\sqrt{2}}(\tilde{e}_k + \lambda_{kl} \tilde{e}_l), \frac{1}{\sqrt{3}}(\tilde{e}_q + \tilde{e}_k + \tilde{e}_l)}_{H_2}} = \vbraces{\pbraces{\tilde{w}_{kl}, \tilde{x}_{kl}}_{H_2}} \\
		&= \vbraces{\pbraces{w_{kl}, x_{kl}}_{H_1}} = \vbraces{\pbraces{\frac{1}{\sqrt{2}}(e_k + i e_l), \frac{1}{\sqrt{3}}(e_q + e_k + e_l)}_{H_1}} = \frac{\sqrt{2}}{\sqrt{6}}
	\end{align*}
	we conclude from Lemma \ref{lemma:complex_geom} that $\nu_l = 1$ and $\lambda_{kl} \in \{i, -i\}$. Finally, for any $k,l \in J$
	\begin{align*}
		\frac{1}{2}\vbraces{\lambda_{kl} - \lambda_{lk}} &= \frac{1}{2}\vbraces{\lambda_{kl} + \overline{\lambda_{lk}}} = \vbraces{\pbraces{\frac{1}{\sqrt{2}}(\tilde{e}_k + \lambda_{kl} \tilde{e}_l), \frac{1}{\sqrt{2}}(\tilde{e}_l + \lambda_{lk} \tilde{e}_k)}_{H_2}} = \vbraces{\pbraces{\tilde{w}_{kl}, \tilde{w}_{lk}}_{H_2}} \\
		&= \vbraces{\pbraces{w_{kl}, w_{lk}}_{H_1}} = \vbraces{\pbraces{\frac{1}{\sqrt{2}}(e_k + i e_l), \frac{1}{\sqrt{2}}(e_l + i e_k)}_{H_1}} = \frac{1}{2} \vbraces{i + \overline{i}} = 0
	\end{align*}
	yields $\lambda_{kl} = \lambda_{lk}$ because of $\lambda_{kl}, \lambda_{lk} \in \{i, -i\}$. 
\end{proof}


\begin{theorem}[Wigner] \label{theorem:wigner}
	Let $H_1$ and $H_2$ be Hilbert spaces and $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ be an isometry. Then there exists an isometry $U: H_1 \to H_2$ that is either linear or antilinear and satisfies $Ux \in g(\C x)$ for every $x \in H_1$. 
\end{theorem}

\begin{proof}
	We already showed the theorem for $\dim H_1 = 0$ in Example \ref{example:zerodim}, for $\dim H_1 = 1$ in Example \ref{example:onedim} and for $\dim H_1 = 2$ in Example \ref{example:twodim}. Thus we assume $\dim H_1 > 2$. We know from Lemma \ref{lemma:onb} that there exists an orthonormal basis $M := \{e_j \mid j \in J\}$ of $H_1$. For all distinct $k,l \in J$ we define
	\begin{align*}
		v_{kl} := \frac{1}{\sqrt{2}}(e_k + e_l) \quad \text{and} \quad w_{kl} := \frac{1}{\sqrt{2}}(e_k + ie_l).
	\end{align*}
	 By Lemma \ref{lemma:aux_last} there exist normalized $\tilde{e}_j \in g(\C e_j)$, $j \in J$, normalized $\tilde{v}_{kl} \in g(\C v_{kl})$, normalized $\tilde{w}_{kl} \in g(\C w_{kl})$ and $\lambda_{kl} \in \{-i, i\}$, $k,l \in J$, $k \neq l$, such that 
	 \begin{align*}
	 \tilde{v}_{kl} = \frac{1}{\sqrt{2}}(\tilde{e}_k + \tilde{e}_l) \quad \text{and} \quad \tilde{w}_{kl} = \frac{1}{\sqrt{2}}(\tilde{e}_k + \lambda_{kl} \tilde{e}_l)
	 \end{align*}
	 and $\lambda_{kl} = \lambda_{lk}$. 
	 
	 For distinct $k,l,m \in J$ we define
	 \begin{align*}
	 	y_{klm} := \frac{1}{\sqrt{3}}(e_k + e_l + ie_m).
	 \end{align*}
	 By Lemma \ref{lemma:aux_main} there exists $\tilde{y}_{klm} \in g(\C y_{klm})$ with 
	 \begin{align*}
	 	\tilde{y}_{klm} = \frac{1}{\sqrt{3}}(\tilde{e}_k + \mu_l \tilde{e}_l + \mu_m \tilde{e}_m)
	 \end{align*}
	 and $\vbraces{\mu_l} = \vbraces{\mu_m} = 1$. For $j \in \{l,m\}$ we find
	 \begin{align*}
	 	\frac{1}{\sqrt{6}} \vbraces{1 + \mu_j} &= \vbraces{\pbraces{\frac{1}{\sqrt{3}}(\tilde{e}_k + \mu_l \tilde{e}_l + \mu_m \tilde{e}_m), \frac{1}{\sqrt{2}}(\tilde{e}_k + \tilde{e}_j)}} = \vbraces{\pbraces{\tilde{y}_{klm}, \tilde{v}_{kj}}_{H_2}} \\
	 	&= \vbraces{\pbraces{y_{klm}, v_{kj}}_{H_1}} = \vbraces{\pbraces{\frac{1}{\sqrt{3}}(e_k + e_l + ie_m), \frac{1}{\sqrt{2}}(e_k + e_j)}_{H_1}} = 
	 	\begin{cases}
	 		\frac{2}{\sqrt{6}} &, \text{if } j = l, \\
	 		\frac{\sqrt{2}}{\sqrt{6}} &, \text{if } j = m.
	 	\end{cases}
	\end{align*}
	Employing Lemma \ref{lemma:complex_geom} we obtain $\mu_l = 1$ and $\mu_m \in \{-i, i\}$. Next, for $j \in \{k,l\}$ we have
	\begin{align*}
		\frac{1}{\sqrt{6}} \vbraces{\mu_m - \lambda_{mj}} &= \frac{1}{\sqrt{6}} \vbraces{\mu_m + \overline{\lambda_{mj}}} = \vbraces{\pbraces{\frac{1}{\sqrt{3}}(\tilde{e}_k + \tilde{e}_l + \mu_m \tilde{e}_m), \frac{1}{\sqrt{2}}(\tilde{e}_m + \lambda_{mj} \tilde{e}_j)}_{H_2}} = \vbraces{\pbraces{\tilde{y}_{klm}, \tilde{w}_{mj}}_{H_2}} \\
		&= \vbraces{\pbraces{y_{klm}, w_{mj}}_{H_1}} = \vbraces{\pbraces{\frac{1}{\sqrt{3}}(e_k + e_l + ie_m), \frac{1}{\sqrt{2}}(e_m + ie_j)}_{H_1}} = \frac{1}{\sqrt{6}}\vbraces{i + \overline{i}} = 0
	\end{align*}
	and conclude that $\lambda_{mk} = \mu_m = \lambda_{ml}$. For an additional $n \in J \setminus\{k, m\}$ we derive
	\begin{align*}
		\lambda_{kl} = \lambda_{kn} = \lambda_{nk} = \lambda_{nm} = \lambda_{mn}.
	\end{align*}
	Thus, we have $\lambda_{kl} = \lambda_{mn}$ for all $k,l,m,n \in J$ with $k \neq l$ and $m \neq n$. 
	
	We define $\zeta: \C \to \C$ as the identitiy function if $\lambda_{kl} = i$ and as the complex conjugation if $\lambda_{kl} = -i$. For all distinct $k,l \in J$ we then have 
	\begin{align*}
		\tilde{w}_{kl} = \frac{1}{\sqrt{2}}(e_k + \zeta(i) e_l).
	\end{align*}
	
	We are going to define $U: H_1 \to H_2$. First we set $U0 := 0$. For $z \in H_1 \setminus \{0\}$ we have
	\begin{align*}
		z = \sum_{j \in J} \lambda_j e_j
	\end{align*}
	where $\lambda_j := (z,e_j)_{H_1}$ for all $j \in J$. As $z \neq 0$ there exists some $k \in J$ with $\lambda_k \neq 0$. By Lemma \ref{lemma:aux_main} there exists a unique vector $\tilde{z} \in g(\C z)$ such that
	\begin{align*}
		\tilde{z} = \zeta\pbraces{\lambda_k} \tilde{e}_k + \sum_{j \in J \setminus \{k\}} \pbraces{\tilde{z}, \tilde{e}_j}_{H_2} \tilde{e}_j.
	\end{align*} 
	This vector satisfies $\norm[H_2]{\tilde{z}} = \norm[H_1]{z}$. First we define $\nu_j := \zeta^{-1}\pbraces{\pbraces{\tilde{z}, \tilde{e}_j}_{H_2}}$ for all $j \in J \setminus \{k\}$ and then 
	\begin{align*}
		Uz := \tilde{z} = \zeta(\lambda_k) \tilde{e}_k + \sum_{j \in J \setminus{k}} \zeta(\nu_j) \tilde{e}_j.
	\end{align*}
	For $l \in J \setminus \{k\}$ we have
	\begin{align*}
		\frac{1}{\sqrt{2}}\vbraces{\lambda_k + \nu_l} &= \frac{1}{\sqrt{2}} \vbraces{\zeta(\lambda_k) + \zeta(\nu_l)} = \vbraces{\pbraces{\zeta(\lambda_k) \tilde{e}_k + \sum_{j \in J \setminus{k}} \zeta(\nu_j) \tilde{e}_j, \frac{1}{\sqrt{2}}(\tilde{e}_k + \tilde{e}_l)}_{H_2}} = |(Uz, \tilde{v}_{kl})_{H_2}| \\
		&= \vbraces{\pbraces{z, v_{kl}}_{H_1}} = \vbraces{\pbraces{\sum_{j \in J} \lambda_j e_j, \frac{1}{\sqrt{2}}(e_k + e_l)}_{H_1}} = \frac{1}{\sqrt{2}} \vbraces{\lambda_k + \lambda_l} 
	\end{align*}
	and 
	\begin{align*}
		\frac{1}{\sqrt{2}}\vbraces{\lambda_k - i \nu_l} &= \frac{1}{\sqrt{2}} \vbraces{\zeta(\lambda_k) + \overline{\zeta(i)} \zeta(\nu_l)} = \vbraces{\pbraces{\zeta(\lambda_k) \tilde{e}_k + \sum_{j \in J \setminus \{k\}} \zeta(\nu_j) \tilde{e}_j, \frac{1}{\sqrt{2}}\pbraces{e_k + \zeta(i) e_l}}_{H_2}} = |(Uz, \tilde{w}_{kl})_{H_2}| \\
		&= \vbraces{\pbraces{z, w_{kl}}_{H_1}} = \vbraces{\pbraces{\sum_{j \in J} \lambda_j e_j, \frac{1}{\sqrt{2}}(e_k + ie_l)}_{H_1}} = \frac{1}{\sqrt{2}} \vbraces{\lambda_k - i \lambda_l}.
	\end{align*}
	As
	\begin{align*}
		\vbraces{\nu_l} = \vbraces{\zeta^{-1}\pbraces{\pbraces{\tilde{z}, \tilde{e}_l}_{H_2}}} = \vbraces{\pbraces{\tilde{z}, \tilde{e}_l}_{H_2}} = \vbraces{\pbraces{z, e_l}_{H_1}} = \vbraces{\lambda_l}
	\end{align*}
	we can employ Lemma \ref{lemma:complex_alg} in order to obtain $\nu_l = \lambda_l$. Thus, 
	\begin{align*}
		Uz = \sum_{j \in J} \zeta(\lambda_j) \tilde{e}_j = \sum_{j \in J} \zeta\pbraces{\pbraces{z, e_j}_{H_1}}\tilde{e}_j.
	\end{align*}
	By definition $Uz \in g(\C z)$. For arbitrary $x,y \in H_1$ and $\mu, \lambda \in \C$ we obtain
	\begin{align*}
		U(\mu x + \lambda y) &= U \pbraces{\sum_{j \in J} \pbraces{\pbraces{\mu x, e_j}_{H_1} + \lambda \pbraces{y, e_j}_{H_1}} e_j} \\
		&= \zeta(\mu) \sum_{j \in J} \zeta\pbraces{\pbraces{x, e_j}_{H_1}} \tilde{e}_j + \zeta(\lambda) \sum_{j \in J} \zeta\pbraces{\pbraces{y, e_j}_{H_1}} \tilde{e}_j = \zeta(\mu) Ux + \zeta\pbraces{\lambda} Uy.
	\end{align*}
	Thus, $U$ is $\zeta$-linear and 
	\begin{align*}
		\norm[H_2]{Uz}^2 &= \norm[H_2]{\sum_{j \in J} \zeta\pbraces{\pbraces{z, e_j}_{H_1}} \tilde{e}_j}^2 = \sum_{j \in J} \vbraces{\zeta\pbraces{\pbraces{z, e_j}_{H_1}}}^2  \\
		&= \norm[H_1]{\sum_{j \in J} \zeta\pbraces{\pbraces{z, e_j}_{H_1}} e_j}^2 = \norm[H_1]{z}^2.
	\end{align*}
\end{proof}


\begin{corollary}
	Let $H_1$ and $H_2$ be Hilbert spaces and $g: \mathcal{P}(H_1) \to \mathcal{P}(H_2)$ be a surjective isometry. Then there exists a function $U: H_1 \to H_2$ that is either linear and unitary or antilinear and antiunitary and satisfies $Ux \in g(\C x)$ for every $x \in H_1$.
\end{corollary}

\begin{proof}
	By Theorem \ref{theorem:wigner} there exists a $\zeta$-linear isometry $U: H_1 \to H_2$ that satisfies $Ux \in g\pbraces{\C x}$ for all $x \in H_1 \setminus \{0\}$, where $\zeta:\C \to \C$ is either the identity mapping or the complex conjugation. 
	Let us consider some arbitrary $y \in H_2$. If $y = 0$, then $U0 = 0 = y$. Thus, assume $y \neq 0$. Due to the fact that $g$ is surjective we know there exists $R \in \mathcal{P}(H_1)$ with $g(R) = \C y$. From this we conclude that $U(R) = \C y$. Hence, there exists $x \in R$ with $Ux = y$ which implies $\ran U = H_2$. From Proposition \ref{prop:unitary} we obtain that $U$ is $\zeta$-unitary.
\end{proof}