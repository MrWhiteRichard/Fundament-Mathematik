% --------------------------------------------------------------------------------

\begin{exercise}[215]

\phantom{}

	Sei $f:\N \to \N$ eine berechenbare schwach monotone totale Funktion. ($x < y \Rightarrow f(x) \leq f(y)$.) Dann ist die Wertemenge von $f$ entscheidbar.

\end{exercise}

% --------------------------------------------------------------------------------

\begin{solution}

\phantom{}

	\begin{enumerate}[label = Fall \arabic*:]
		\item $\exists s \in \N: \forall x \in \N: f(x) < s.$ In diesem Fall ist $f(\N)$ eine endliche Menge und daher entscheidbar.
		\item $\nexists s \in \N: \forall x \in \N: f(x) < s.$ In diesem Fall betrachten wir die Funktion
			\begin{align*}
			g(0,y) := \chi_{\{0\}}(f(y)), \quad g(x + 1, y) := g(x) + \chi_{\{0\}}(f(y) - (x + 1)) \chi_{\{0\}}((x + 1) - f(y)).
			\end{align*}
			Es gilt $g(x,y) = \chi_{\{0, \dots, x\}}(f(y))$ und aufgrund der Voraussetzung dieses Falles gibt es für jedes $x \in \N$ ein $y_x \in \N$ mit $f(y_x) > x$. Deshalb und wegen der Monotonie gilt
			\begin{align*}
			\mu g(x) = \min\{y \in \N \mid g(x,y) = 0\} = \max\{z \in \N \mid f(z) \leq x\} + 1.
			\end{align*}
			Nun können wir die streng monotone Funktion
			\begin{align*}
			h(0) := f(0), \quad h(x + 1) := f(\mu g(h(x)))
			\end{align*}
			definieren für welche $h(\N) = f(\N)$ gilt. Es reicht also die Aussage für die streng monotone Funktion $h$ zu zeigen. \\
			Sei $f: \N \to \N$ berechenbar, total und strikt monoton. Dann gilt $f(x) \geq x$
			und somit
			\begin{align*}
				f(x) = z \implies z \leq x.
			\end{align*}
			Um zu zeigen, dass $f(\N)$ entscheidbar ist, zeigen wir, dass
			$\chi_{f(\N)} \subset \N \times \N$ eine $\Sigma_1$-Menge ist.
			Berechenbarkeit von $f$ ist äquivalent dazu, dass der Graph von $f$ eine
			$\Sigma_1$-Menge ist, also gibt es eine $\Sigma_0$-Formel $\varphi$, sodass
			\begin{align*}
				(x,y) \in f \iff \exists u\, \varphi(x,y,u).
			\end{align*}
			Damit erhalten wir
			\begin{align*}
				(x,y) \in \chi_{f(\N)} &\iff [(y = 1 \land x \in f(\N))
				\lor (y = 0 \land x \notin f(\N))] \\
				&\iff [(y = 1 \land \exists z_1 \in \N: x = f(z_1))
				\lor (y = 0 \land \forall z_2 \in \N: x \neq f(z_2))] \\
				&\iff [(y = 1 \land \exists z_1 \leq x: x = f(z_1))
				\lor (y = 0 \land \forall z_2 \leq x: x \neq f(z_2))] \\
				&\iff [(y = 1 \land \exists z_1 \leq x: \underbrace{x = f(z_1)}_{\Sigma_1-\text{Formel}})
				\lor (y = 0 \land \forall z_2 \leq x: \underbrace{f(z_2) = y \land y \neq x)}_{\Sigma_1-\text{Formel}}].
			\end{align*}
		Also ist $\chi_{f(\N)} \subset \N \times \N$ eine $\Sigma_1$-Menge, also
		$\chi_{f(\N)}$ $\mu$-rekursiv, also $f(\N)$ entscheidbar.
	\end{enumerate}

\end{solution}
