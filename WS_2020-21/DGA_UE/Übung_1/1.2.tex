% --------------------------------------------------------------------------------

\begin{exercise}

Sequentielle Suche:
Gegeben sei ein $n$-elementiger Datenfeld $A[1, \ldots, n]$ und ein Wert $x$.
Überlegen Sie sich einen Pseudocode, der $x$ durch sukzessive Vergleiche mit den Elementen $A[1], A[2], \ldots$ sucht und einen Wert $j \in \Bbraces{1, \ldots n}$ ausgibt, falls $x = A[j]$, oder $\NIL$ ausgibt, falls $x$ nicht in der Liste $A$ enthalten ist.

\begin{enumerate}[label = (\alph*)]

    \item Beweisen Sie, dass Ihr Algorithmus ein korrektes Ergebnis liefert (etwa mit Zuhilfenahme einer Schleifeninvariante).

    \item Machen Sie für diesen Algorithmus eine best-case-Analyse, eine worst-case-Analyse und eine average-case-Analyse (für die average-case-Analyse soll das Modell der Zufallspermutationen verwendet werden, d.h. alle Permutationen von $\Bbraces{1, \ldots, n}$ sind gleich wahrscheinlich.
    Weiters soll angenommen werden, dass $x$ im Datensatz enthalten ist).

\end{enumerate}

\end{exercise}

% --------------------------------------------------------------------------------

\begin{solution}

\begin{flalign*}
  1&:  \textbf{Prozedur}~ \textsc{Sequentielle Suche} (A,x) & \\
  2&:  \quad n := A.\textit{Länge} & \\
  3&:  \quad i := \NIL & \\
  4&:  \quad \textbf{Für}~ j := 1, \dots, n & \\
  5&:  \quad \quad \textbf{Wenn}~ x = A[j] & \\
  6&:  \quad \quad \quad i := j & \\
  7&:  \quad \quad \quad \textbf{Abbruch} & \\
  8&:  \quad \quad \textbf{Ende Wenn} & \\
  9&:  \quad \textbf{Ende Für} & \\
  10&: \textbf{Ende Prozedur}
\end{flalign*}

\begin{enumerate}[label = (\alph*)]

  \item Bezeichne $\texttt{n}$ die Länge eines Datenfelds $\texttt{A}$, $\texttt{i}$ den (potentiellen) kleinsten Index von einer Variable $\texttt{x}$ (vielleicht) aus $\texttt{A}$, und $\texttt{j}$ die laufende Variable der Schleife der $4$-ten Zeile.
  Unsere Schleifeninvariante lautet wie folgt.

  \begin{align*}
    I(\texttt{A}, \texttt{x}, \texttt{i}, \texttt{j}):
    \texttt{j} \leq \texttt{n}
    \land
    (
      (
        \texttt{i} = \NIL
        \land
        \Forall \texttt{k} < \texttt{j}:
        \texttt{x} \neq \texttt{A}[\texttt{k}]
      )
      \lor
      \texttt{x} = \texttt{A}[\texttt{i}]
    )
  \end{align*}

  \begin{enumerate}[label = \arabic*.]

    \item Zu Beginn des ersten Durchlaufs der Schleife ist $\texttt{i} = \NIL$ und $\texttt{j} = 1$.
    $I(\texttt{A}, \texttt{x}, \texttt{i}, \texttt{j})$ ist hier also wahr.

    \item Es gelte $I(\texttt{A},\texttt{x},\texttt{i},\texttt{j})$.
    Falls $\texttt{x} = \texttt{A}[\texttt{i}]$, dann hat der Algorithmus bereits terminiert.
    Weil die Schleife in der $4$-ten Zeile nach oben zählt, ist $\texttt{j}^\prime = \texttt{j} + 1$.
    Falls $\texttt{j} = \texttt{n}$, dann terminiert der Algorithmus, weil dann $\texttt{j}^\prime > \texttt{n}$.
    Ansonsten gelten $\texttt{j}^\prime \leq \texttt{n}$, $\texttt{i} = \NIL$, und $\Forall \texttt{k} < \texttt{j}: \texttt{x} \neq \texttt{A}[\texttt{k}]$, und die Schleife in der $4$-ten Zeile wird ein weiteres mal instanziert.
    Offensichtlich gilt $\texttt{A}^\prime = \texttt{A}$ sowie $\texttt{x}^\prime = \texttt{x}$ weil sich $\texttt{A}$ und $\texttt{x}$ nie ändern.
    Für den Wert von $\texttt{i}^\prime$ machen wir eine Fallunterscheidungs.

    \begin{enumerate}[label = \Roman*.]

      \item Fall ($\texttt{x}^\prime = \texttt{A}^\prime[\texttt{j}^\prime]$):
      Dann wird die $6$-te Zeile ausgeführt und $\texttt{i}^\prime = \texttt{j}^\prime$.
      Anschließend terminiert der Algorithmus.

      \item Fall ($\texttt{x}^\prime \neq \texttt{A}^\prime[\texttt{j}^\prime]$):
      Dann wird die $6$-te Zeile nicht ausgeführt und es bleibt $\texttt{i}^\prime = \texttt{i}$.
      Wegen $I(\texttt{A}, \texttt{x}, \texttt{i}, \texttt{j})$ gilt $\Forall \texttt{k} < \texttt{j}: \texttt{x} \neq \texttt{A}[\texttt{k}]$ und wegen der Fallunterscheidungsbedingung gilt $\texttt{x}^\prime \neq \texttt{A}^\prime[\texttt{j}^\prime]$.
      Insgesamt folgt daher $\Forall \texttt{k} < \texttt{j}^\prime: \texttt{x} \neq \texttt{A}[\texttt{k}]$.
    \end{enumerate}

    Also gilt auch $I(\texttt{A}^\prime, \texttt{x}^\prime, \texttt{i}^\prime, \texttt{j}^\prime)$.

    \item Offensichtlich ist $\texttt{i}$ für $\texttt{j} = \texttt{n}$ das gewünschte Ergebnis.

  \end{enumerate}

  \item Sei $A$ ein Datenfeld der Länge $n$ und $x \in A$.

  \begin{enumerate}[label = \arabic*.]

    \item Worst-Case:

    $x$ taucht erst im letzten Eintrag von $A$ auf, d.h. $A[n] = x$.

    \begin{align*}
      \implies
      T_{\mathrm{s}}(A, x)
      =
      c_2 + c_3 + (c_4 + c_5) n + c_6
      =
      \Landau{n}
    \end{align*}

    \item Average-Case:

    Nachdem im Skriptum vorausgesetzt wird (ohne darauf hinzuweisen), dass die Einträge von $A$ verschieden sind und damit o.B.d.A $\Bbraces{1, \dots, n}$, werden wir das hier auch tun.
    Ansonsten müsste man die Wahrscheinlichkeit berechnen, dass $i = 1, \dots, n$ der kleinste Index ist, sodass $A[i] = x$.

    \begin{align*}
      W
      (
        A[i] = x
        \land
        \Forall j = 1, \dots, i-1:
        A[j] \neq x
        \mid
        \Exists j = 1, \dots, n:
        A[j] = x
      )
    \end{align*}

    Für $\pi \in S_n$ und $\pi(i) = x$ mit $i = 1, \dots, n$, muss die Wenn-Bedingung in der $5$-ten Zeile genau $i$-Mal überprüft werden.
    Weil alle Permutationen aus $S_n$ gleich wahrscheinlich sind, erhalten wir für die durchschnittliche Anzahl der Wenn-Bedingungs-Überprüfungen

    \begin{align*}
      \overline{t}
      =
      \sum_{i=1}^n \frac{i}{n}
      =
      \frac{1}{n} \frac{n (n + 1)}{2}
      =
      \frac{n + 1}{2}.
    \end{align*}

    \begin{align*}
      \implies
      T_{\mathrm{d}}(A, x)
      =
      c_2 + c_3 + (c_4 + c_5) \frac{n + 1}{2} + c_6
      =
      \Landau{n}
    \end{align*}

    \item Best-Case:

    $x$ taucht erst im ersten Eintrag von $A$ auf, d.h. $A[1] = x$.

    \begin{align*}
      T_{\mathrm{b}}(A, x)
      =
      c_2 + c_3 + c_4 + c_5 + c_6
      =
      \Landau{1}
    \end{align*}

  \end{enumerate}

\end{enumerate}

\end{solution}

% --------------------------------------------------------------------------------

\begin{solution}
	\begin{flalign*}
	&1:  \textbf{Prozedur}~ \textsc{Sequentielle Suche} (A,x) & \\
	&2:  \quad j := 1 & \\
	&3:  \quad \textbf{Solange}~ j \leq A.L"ange~ und ~ A[j] \neq x & \\
	&4:  \quad \quad j := j + 1 & \\
	&5:  \quad \textbf{Ende Solange} & \\
	&6:  \quad \textbf{Wenn}~ j = A.L"ange + 1 & \\
	&7:  \quad \quad j := NIL & \\
	&8:  \quad \textbf{Ende Wenn} & \\
	&9:  \textbf{Ende Prozedur}
	\end{flalign*}
	Wir wollen nun einen Korrektheitsbeweis führen. Dafür bezeichnen wir mit $k$ den Schleifendurchlauf und definieren die Schleifeninvariante $I(j,k): j = k$. Nun gilt
	\begin{enumerate}[label = (\arabic*)]
		\item Zu Beginn der Schleife befinden wir uns im ersten Schleifendurchlauf, also $k = 1$ und tatsächlich gilt auch $j = 1 = k$.
		\item Sei nun $I(j,k)$ zu Beginn des $k$-ten Schleifendurchlaufs erfüllt, also $j = k$. Nun wird in der Schleife $j := j + 1 = k + 1$, was dann auch zu Beginn des $k+1$-ten Schleifendurchlaufs gültig ist.
		\item Bei Beendigung der Schleife ist $j = A.L"ange + 1$ oder $A[j] = x$. Im ersten Fall wird Zeile 8 ausgeführt und der Algorithmus endet mit $j = NIL$. Im zweiten Fall sind wir ohnehin fertig.
	\end{enumerate}
	Nun wollen wir noch den Aufwand des Algorithmus analysieren. Sei dazu $t$ die Anzahl der Ausführungen des Schleifenkopfes und $s$ die Anzahl der Ausführungen von Zeile 7. Allgemein gilt nun
	\begin{align*}
	T(A,x) = (c_3 + c_5)t + c_4 (t-1) + c_7 s + c_2 + c_6 + c_8
	\end{align*}
	für den Aufwand.
	\begin{enumerate}[label = (\arabic*)]
		\item Im besten Fall ist $A[1] = x$, folglich $s = 0$ und $t = 1$. Damit ergibt sich $T(A,x) = c_2 + c_3 + c_5 + c_6 + c_8 = \Landau{1}$.
		\item Im schlechtesten Fall ist $x$ nicht in der Liste $A$ enthalten und es ist $s = 1$ und $t = n + 1$. Es ergibt sich ein Aufwand von $T(A,x) = (c_3 + c_5) (n + 1) + n c_4 + c_2 + c_6 + c_7 + c_8 = \Landau{n}$.
		\item Zur Analyse des durchschnittlichen Falls nehmen wir an, dass $x$ in der Liste $A$ enthalten ist und an jeder Stelle mit der gleichen Wahrscheinlichkeit, nämlich $\frac{1}{n}$ vorzufinden ist. Mit Sicherheit ist also $s = 0$ und wir berechnen
		\begin{align*}
		\overline{t} = \sum_{i=1}^n \frac{i}{n} = \frac{n+1}{2}.
		\end{align*}
		und erhalten mit $t = \overline{t}$ den Aufwand $T(A,x) = (c_3 + c_5) \frac{n + 1}{2} + c_4 \frac{n - 1}{2} + c_2 + c_6 + c_8 = \Landau{n}$.
	\end{enumerate}
\end{solution}
