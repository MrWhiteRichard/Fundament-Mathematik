% --------------------------------------------------------------------------------

\begin{exercise}

Der Durchmesser eines Graphen ist die maximale Distanz zwischen zwei Knoten.
Entwerden Sie einen effizienten Algorithmus zur Bestimmung des Durchmessers
eines Baumes und analysieren Sie dessen Laufzeit.

\end{exercise}

% --------------------------------------------------------------------------------

\begin{solution}

Der Algorithmus ist so konstruiert, dass für jeden Knoten der längste Pfad durch diesen Knoten bestimmt wird. Diesen längsten Pfad bestimmen wir, indem wir den Knoten als Wurzel ansehen und die Höhen der zwei höchsten Unterbäume, die nach wegstreichen der Wurzel entstehen, addieren. Die Höhen werden dabei rekursiv genauso bestimmt, nur ohne die Addition. \pagebreak

\begin{algorithm}
  \caption{Durchmesser eines Baumes}
  \begin{algorithmic}[1]
    \Procedure{DurchmesserBaum}{B}
    \State $V, E := B$
    \State Sei $L$ neues Datenfeld der Länge $|V|$
    \For{$v \in V$}
    \State $Z :=$ ZusammenhangskomponentenBaum($B-v$)
    \If{$Z.\textit{Länge} = 0$} $\implies B-v$ ist leer
    \State $L[v] := 0$
    \EndIf
    \If{$Z.\textit{Länge} = 1$}
    \State $L[v] :=$ \textsc{Höhe}($B-v$) + 1
    \EndIf
    \If{$Z.\textit{Länge} \geq 2$}
    \State $H := \bbraces{\textsc{Höhe}(B^\prime, v^\prime) - 1: B^\prime \in Z,~ \Bbraces{v,v^\prime} \in E}$
    \State $L[v] := \max \bbraces{h_1 + h_2:~ h_1,h_2 \in H, h_1 \neq h_2} + 2$
    \EndIf
    \EndFor
    \State Antworte $\max L$
    \EndProcedure
  \end{algorithmic}
\end{algorithm}

\begin{algorithm}
  \caption{Höhe eines Baumes}
  \begin{algorithmic}[1]
    \Procedure{Höhe}{B,v}
    \State $V, E := B$
    \If{$|V| = 1$}
    \State Antworte 1
    \EndIf
    \If{$|V| \geq 2$}
    \State Antworte $\max \bbraces{\textsc{Höhe}(B^\prime, v^\prime):~ B^\prime \in \text{ZusammenhangskomponentenBaum}(B-v), \Bbraces{v, v^\prime} \in E} + 1$
    \EndIf
    \EndProcedure
  \end{algorithmic}
\end{algorithm}


Nun zur Aufwandbestimmung: In Zeile $4$ sehen wir, dass der Aufwand wohl $\Landau(|V| \cdot A)$ sein wird, wenn $A$ den Aufwand innerhalb der Schleife bezeichnet. Die Bestimmung der Zusammenhangskomponenten in Zeile $5$ ist in unserem Fall einfach und trägt nicht groß zum Aufwand bei. Die Zahl der Zusammenhangskomponenten (bzw Teilbäume) sowie die Höhe dieser verhält sich invers zueinander, da $|Z| \cdot H_Z \leq |V|$. Bei der Bestimmung der Höhe einer Zusammenhangskomponente wird nun aber jeder Knoten innerhalb dieser Zusammenhangskomponente besucht. Insgesamt besuchen wir also alle Knoten (bis auf den Weggestrichenen) und haben somit Aufwand $\Landau(|V|)$ innerhalb der Schleife.

Insgesamt hat der Algorithmus somit Aufwand $\Landau(|V|^2)$.
\end{solution}

% --------------------------------------------------------------------------------

\begin{solution}
	\phantom{}
		\begin{algorithm}
		\caption{Durchmesser eines Baumes 2} 
		\begin{algorithmic}[1]
			\Procedure{DurchmesserBaum2}{$B = (V,E)$}
			\State Sei \textit{bekannt} neues Datenfeld der Länge $|V|$, überall mit \textbf{falsch} initialisiert.
			\State Sei $S$ ein neuer Stapel, leer initialisiert
			\State Wähle beliebigen Knoten $u \in \V$ 
			\State \textit{bekannt}$[u] :=$ \textbf{wahr}
			\State \verb|HINZUFÜGEN|$(S,u)$
			\State Wir wollen ein Datenfeld $d$ der Länge ``Anzahl Nachbarn von $u$'', überall mit $1$ initialisiert 
			\State $i := 0$
			\While{$S$ nicht leer}
			\State $v :=$ \verb|ENTFERNEN|$(S)$
			\If{$v$ ist Nachbar von $u$}
			\State $i := i + 1$
			\Else
			\State $d_i := d_i + 1$
			\EndIf
			\For{jede Kante $(v,w) \in E$}
			\If{\textit{bekannt}$[w] =$ \textbf{falsch}}
			\State  \textit{bekannt}$[w] :=$ \textbf{wahr}
			\State \verb|HINZUFÜGEN|$(S,w)$
			\EndIf
			\EndFor
			\EndWhile
			\Return Summe der zwei größten Werte von $d$
			\EndProcedure
		\end{algorithmic}
	\end{algorithm}
\end{solution}