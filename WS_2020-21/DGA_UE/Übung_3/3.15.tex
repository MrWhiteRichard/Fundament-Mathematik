% --------------------------------------------------------------------------------

\begin{exercise}

Natural Merge-Sort ist eine Variante von Merge-Sort, die bereits vorsortierte Teilfolgen
(sogenannte runs) ausnutzt. Ein run ist eine Teilfolge aufeinanderfolgender Glieder $x_i, x_{i+1}, \dots, x_{i+k}$ mit $x_i \leq x_{i+1} \leq \dots \leq x_{i+k}$. Die Basis für den Verschmelzen-Vorgang bilden hier nicht
die rekursiv oder iterativ gewonnenen Zweiergruppen, sondern die runs. Im ersten Durchlauf des Algorithmus
bestimmt man die runs, anschließend fügt man die runs mittels VERSCHMELZEN zusammen.

\begin{enumerate}[label = (\alph*)]
  \item Sortieren Sie folgende Liste mittels Natural Merge-Sort:
  \begin{align}
    2,4,3,1,7,6,8,9,0,5
  \end{align}
  \item Schreiben Sie einen Pseudocode für Natural Merge-Sort.
  \item Machen Sie eine Best- sowie eine Worst-Case-Analyse für das Laufzeiverhalten von Natural Merge-Sort
  bei einem Eingabefeld der Größe $n$.
\end{enumerate}
\end{exercise}

% --------------------------------------------------------------------------------

\begin{solution}

\begin{enumerate}[label = (\alph*)]
  \item Zu mühsam :D
  \item
  \begin{flalign*}
     1&: \textbf{Prozedur}~ \textsc{runsverschmelzen} (runs) \\
     2&: \quad m := runs.Länge \\
     3&: \quad C = runs[1] \\
     3&: \quad \textbf{Für}~ i = 2,\dots,m \\
     4&: \quad \quad C = \textsc{verschmelzen} (C, runs[i])  \\
     10&: \quad \textbf{Ende Für} \\
     10&: \quad \textbf{Antworte~} C \\
     6&: \textbf{Ende Prozedur}
  \end{flalign*}

  \begin{flalign*}
     1&: \textbf{Prozedur}~ \textsc{natural merge sort} (A) \\
     2&: \quad n := A.Länge \\
     3&: \quad runs := [] \\
     3&: \quad \textbf{Solange}~ i \leq n \\
     4&: \quad \quad j := 0  \\
     6&: \quad \quad run := [A[i]] \\
     5&: \quad \quad \textbf{Solange}~ A[i+j] \leq A[i+j+1]  \\
     8&: \quad \quad \quad j := j+1 \\
     8&: \quad \quad \quad run.append(A[i+j]) \\
     10&: \quad \quad \textbf{Ende Solange} \\
     10&: \quad \quad runs.append(run) \\
     10&: \quad \quad i := i+j+1 \\
     10&: \quad \textbf{Ende Solange} \\
     10&: \quad \textbf{Antworte~} \textsc{runsverschmelzen} (runs) \\
     6&: \textbf{Ende Prozedur}
  \end{flalign*}

    \item Best-Case: Die Liste ist schon aufsteigend sortiert, der Aufwand liegt also nur in der Schleife in der zweiten Prozedur und somit erhalten wir $\Theta(n)$. \\

    Worst-Case: Die Liste ist absteigend sortiert, wir müssen also die Prozedur Verschmelzen für $i = 2,\dots,n$ auf die Datenfelder $C$ und $runs[i]$ der Länge $i-1$ und $1$ anwenden. Wir kommen also insgesamt auf einen Aufwand von

    \begin{align*}
      \Theta(n) + \sum_{i=2}^{n} \Theta(i) = \Theta(n) + \frac{\Theta(n^2+n)}{2} = \Theta(n^2)
    \end{align*}

    Macht das so Sinn??

\end{enumerate}
\end{solution}


% --------------------------------------------------------------------------------
