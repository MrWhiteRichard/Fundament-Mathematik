% --------------------------------------------------------------------------------

\begin{exercise}

Sei $A[1,\dots,n]$ ein Feld mit $n$ verschiedenen Zahlen. Das Paar $(i,j)$ wird Inversion genannt,
wenn $i < j$ und $A[i] > A[j]$ gilt.

\begin{enumerate}[label = (\alph*)]
  \item Welches Feld mit Elementen der Menge $\{1,\dots, n\}$ besitzt die meisten Inversionen und
  wie viele Inversionen sind in diesem Feld enthalten?
  \item Welche Beziehung gibt es zwischen der Anzahl von Inversionen im Eingabefeld und der Laufzeit
  von Insertion-Sort (Einfügesortieren)?
  \item Geben Sie einen Algorithmus an, der die Anzahl von Inversionen in einer Permutation von
  $n$ Elementen bestimmt und dessen Laufzeit im schlechtesten Fall $\Theta(n \log n)$ ist.
  (Hinweis: Modifizieren Sie Merge-Sort (Sortieren durch Verschmelzen) in passender Weise)
\end{enumerate}

\end{exercise}

% --------------------------------------------------------------------------------

\begin{solution}

Wenn wir die Werte des Datenbereichs auf $\{1,\dots,n\}$
einschränken, bezeichnet die Anzahl der Inversionen genau die Anzahl der Fehlstände,
der durch $A[1,\dots,n]$ induzierten Permutation.
\begin{enumerate}[label = (\alph*)]
  \item Betrachte das Feld $A[1,\dots,n] = [n,\dots,1]$.
  Klarerweise gilt für alle $i < j: A[i] > A[j]$.
  \begin{align*}
    |\{(i,j): 1 \leq i < j \leq n\}| = \left|\bigcup_{j\leq n}\{(i,j): 1 \leq i < j\}\right|
    = \sum_{j=1}^n j-1 = \frac{n(n-1)}{2}
  \end{align*}
  \item Für jedes $j = 2,\dots,n$ entspricht die Anzahl der inneren Schleifendurchläufe genau
  der Anzahl aller $i < j$ mit $A[i] > A[j]$. Insgesamt ist die Anzahl der inneren
  Schleifendurchläufe also genau die Anzahl der Inversionen des Datenfelds.
  \item
  \begin{flalign*}
    1&: \textbf{Prozedur}~ \textsc{Inversionsanzahlfinden} 
    12&: \textbf{Ende Prozedur}
  \end{flalign*}
\end{enumerate}

\end{solution}

% --------------------------------------------------------------------------------
